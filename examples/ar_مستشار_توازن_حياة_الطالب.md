# مستشار توازن حياة الطالب
مثال متقدم يدمج الكيانات، والحالات الضبابية، والمنطق، والبرمجة الدلالية، ووحدة التشابه والمترادفات بالعربية لبناء مستشار يختار خطة دراسة صحية مفسَّرة لطالب.

```bayan
# ١) سياق دلالي ومعرفي عن الطالب

معنى أحمد:
{
    "هو": "طالب",
    "يدرس": "الرياضيات",
    "هدف": "الحصول على منحة"
}

معلومة "حالة أحمد الحالية":
{
    "محتوى": {
        "تركيز": 0.4,
        "تعب": 0.7,
        "سعادة": 0.3
    },
    "سياق": {
        "زمان": "ليل",
        "مكان": "المنزل",
        "مصدر": "تقييم_ذاتي",
        "يقين": 0.9
    }
}

معرفة_متطورة "مسار أحمد الدراسي":
{
    "قيمة_حالية": "توازن_غير_مريح",
    "تاريخ": [
        {"زمن": "بداية_الفصل", "قيمة": "حماس_عال"},
        {"زمن": "منتصف_الفصل", "قيمة": "تعب_متزايد"}
    ],
    "توقع_مستقبلي": "خطر_الإرهاق_إذا_استمر_على_نفس_النمط"
}

أنطولوجيا "أنشطة الطالب":
{
    "جذر": "نشاط",
    "تصنيف": {
        "دراسة": ["مذاكرة", "مراجعة", "حل_مسائل"],
        "راحة": ["نوم", "استرخاء", "تنفس_عميق"]
    }
}

سياق_حالي:
{
    "زمان": "ليل",
    "مكان": "منزل",
    "حالة_المستخدم": "متعب"
}

# تفضيل لفظي كما قد يعبّر الطالب عن نفسه
تفضيل("أحمد", "مذاكرة_هادئة_في_الليل").

# ٢) تعريف مجموعات مترادفة لأفعال الدراسة والراحة (DSL المترادفات)
دراسة(مذاكرة:0.9, مراجعة:0.8)
راحة(نوم:0.8, استرخاء:0.7)

# ٣) كيان الطالب + المنطق + استغلال التشابه

هجين {
    import bayan.core.similarity as sim
    sim.load_selective(logical, ["similarity"])  # similar/5, sim_threshold/2, close/3,4, synonym/3

    # كيان أحمد وحالاته وأفعاله (محرك الكيانات)
    كيان أحمد {
        حالات: {
            "تركيز": {"نوع": "ضبابي", "قيمة": 0.4},
            "تعب":   {"نوع": "ضبابي", "قيمة": 0.7},
            "سعادة": {"نوع": "ضبابي", "قيمة": 0.3}
        },
        "أفعال": {
            "دراسة": {
                "قوة": 0.8,
                "تأثيرات": [
                    {"on": "تركيز", "formula": "value + 0.3*action_value"},
                    {"on": "تعب",   "formula": "value + 0.4*action_value"}
                ]
            },
            "راحة": {
                "قوة": 0.7,
                "تأثيرات": [
                    {"on": "تعب",   "formula": "value - 0.5*action_value"},
                    {"on": "سعادة", "formula": "value + 0.2*action_value"}
                ]
            }
        }
    }

    # معادلة أضداد: "تعب" و"راحة_نفسية" مجموعهما 1.0
    عرّف_أضداد("أحمد", "حالة", "تعب", "راحة_نفسية", 1.0)

    # تغليف عربي على synonym/3 من وحدة التشابه
    مرادف(?أصل, ?كلمة, ?درجة) :-
        synonym(?أصل, ?كلمة, ?درجة).

    # سياق ثقيل إذا كان التعب عالياً
    سياق_ثقيل(?شخص) :-
        state(?شخص, "تعب", ?T),
        ?T >= 0.6.

    # توحيد نشاط الدراسة بغض النظر عن اللفظ الذي يفضله الطالب
    نشاط_موحد(?شخص, "دراسة") :-
        تفضيل(?شخص, ?لفظ),
        ( ?لفظ == "دراسة"
          ; مرادف("دراسة", "مذاكرة", ?S1), ?S1 >= 0.7
          ; مرادف("دراسة", "مراجعة", ?S2), ?S2 >= 0.7 ).

    # إذا كان السياق ثقيلاً نضيف نشاط الراحة
    نشاط_موحد(?شخص, "راحة") :-
        سياق_ثقيل(?شخص).

    # خطة دراسة صحية بناء على الحالة الحالية
    خطة_دراسة_صحية(?شخص,
                     ["راحة_قصيرة(20%)", "دراسة_مركزة(40%)", "نشاط_خفيف(40%)"],
                     "تعب_عال + تركيز_ضعيف ⇒ ابدأ براحة ثم دراسة متوسطة") :-
        state(?شخص, "تعب", ?T), ?T >= 0.6,
        state(?شخص, "تركيز", ?C), ?C =< 0.5.

    خطة_دراسة_صحية(?شخص,
                     ["دراسة_مركزة(60%)", "راحة_خفيفة(20%)", "مراجعة_هادئة(20%)"],
                     "تعب_متوسط + تركيز_مقبول ⇒ ركز على الدراسة مع فواصل قصيرة") :-
        state(?شخص, "تعب", ?T), ?T < 0.6,
        state(?شخص, "تركيز", ?C), ?C > 0.5.

    # بناء خطة لفظية (هنا نعيد نفس القائمة، ويمكن توسيعها لاحقاً باستعمال مرادف/3)
    خطة_لفظية(?شخص, ?قائمة_منطقية, ?قائمة_لفظية, ?تفسير) :-
        خطة_دراسة_صحية(?شخص, ?قائمة_منطقية, ?تفسير),
        ?قائمة_لفظية = ?قائمة_منطقية.

    print("==== مستشار توازن حياة الطالب ====").
    print("خطة منطقية + تفسير:").
    استعلام خطة_دراسة_صحية("أحمد", ?خطة, ?تفسير).
    print("----").
    print("خطة لفظية (مع مراعاة المترادفات):").
    استعلام خطة_لفظية("أحمد", ?خطة2, ?خطة_لفظية, ?تفسير2).
}
```

