# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Bayan Metaprogramming Demo - Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ÙˆØµÙÙŠØ©
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# This demo shows how Bayan code can modify itself at runtime
# Ù‡Ø°Ø§ Ø§Ù„Ø¹Ø±Ø¶ ÙŠÙˆØ¶Ø­ ÙƒÙŠÙ ÙŠÙ…ÙƒÙ† Ù„ÙƒÙˆØ¯ Ø¨ÙŠØ§Ù† ØªØ¹Ø¯ÙŠÙ„ Ù†ÙØ³Ù‡ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„

print("â•" * 60)
print("ğŸ”® Bayan Metaprogramming Demo - Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ÙˆØµÙÙŠØ© ğŸ”®")
print("â•" * 60)

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 1. eval - ØªÙ‚ÙŠÙŠÙ… Ø§Ù„ØªØ¹Ø¨ÙŠØ±Ø§Øª Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
print("\nğŸ“ 1. eval() - Dynamic Expression Evaluation:")
print("-" * 40)

# Simple expression
result1 = eval("1 + 2 * 3")
print(f"   eval('1 + 2 * 3') = {result1}")

# Expression with variables
x = 10
y = 5
result2 = eval("x + y")
print(f"   eval('x + y') with x=10, y=5 = {result2}")

# Mathematical expression
expr = "3.14159 * 2 * 2"
area = eval(expr)
print(f"   Area of circle (r=2): {area}")

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 2. exec - ØªÙ†ÙÙŠØ° ÙƒÙˆØ¯ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
print("\nâš¡ 2. exec() - Dynamic Code Execution:")
print("-" * 40)

# Execute simple code
exec("message = 'Hello from dynamic code!'")
print(f"   {message}")

# Execute code block
code = """
sum_result = 0
for i in range(1, 6): {
    sum_result = sum_result + i
}
"""
exec(code)
print(f"   Sum of 1 to 5 = {sum_result}")

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 3. create_function - Ø¥Ù†Ø´Ø§Ø¡ Ø¯ÙˆØ§Ù„ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
print("\nğŸ”§ 3. create_function() - Dynamic Function Creation:")
print("-" * 40)

# Create a simple function
create_function("square", ["n"], "return n * n")
print(f"   square(7) = {square(7)}")

# Create a more complex function
create_function("greet", ["name", "lang"], """
if lang == "ar": {
    return "Ù…Ø±Ø­Ø¨Ø§Ù‹ " + name
} else: {
    return "Hello " + name
}
""")
print(f"   greet('Ø£Ø­Ù…Ø¯', 'ar') = {greet('Ø£Ø­Ù…Ø¯', 'ar')}")
print(f"   greet('John', 'en') = {greet('John', 'en')}")

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 4. compile - ØªØ±Ø¬Ù…Ø© Ù…Ø³Ø¨Ù‚Ø© Ù„Ù„ÙƒÙˆØ¯
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
print("\nğŸ“¦ 4. compile() - Pre-compilation:")
print("-" * 40)

# Compile code once, execute multiple times
compiled = compile("counter = counter + 1")
counter = 0
exec_compiled(compiled)
exec_compiled(compiled)
exec_compiled(compiled)
print(f"   Counter after 3 executions: {counter}")

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 5. introspect - ØªØ£Ù…Ù„ Ø§Ù„ÙƒØ§Ø¦Ù†Ø§Øª
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
print("\nğŸ” 5. introspect() - Object Introspection:")
print("-" * 40)

info = introspect([1, 2, 3])
print(f"   List type: {info['type']} ({info['type_ar']})")

info2 = introspect("Ù…Ø±Ø­Ø¨Ø§Ù‹")
print(f"   String type: {info2['type']} ({info2['type_ar']})")

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 6. Self-Modifying Code - ÙƒÙˆØ¯ ÙŠØ¹Ø¯Ù„ Ù†ÙØ³Ù‡
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
print("\nğŸ§¬ 6. Self-Modifying Code Example:")
print("-" * 40)

# Create a function that creates other functions!
def function_factory(op_name, op_symbol): {
    body = f"return a {op_symbol} b"
    create_function(op_name, ["a", "b"], body)
    return op_name + " created!"
}

# Use the factory to create math operations
function_factory("add", "+")
function_factory("subtract", "-")
function_factory("multiply", "*")

print(f"   add(10, 5) = {add(10, 5)}")
print(f"   subtract(10, 5) = {subtract(10, 5)}")
print(f"   multiply(10, 5) = {multiply(10, 5)}")

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 7. list_functions - Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯ÙˆØ§Ù„
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
print("\nğŸ“‹ 7. list_functions() - List Defined Functions:")
print("-" * 40)
funcs = list_functions()
# Show only functions we created
target_funcs = ["square", "greet", "add", "subtract", "multiply", "function_factory"]
our_funcs = []
for f in funcs: {
    if f in target_funcs: {
        our_funcs.append(f)
    }
}
print(f"   Our functions: {our_funcs}")

print("\n" + "â•" * 60)
print("âœ… Metaprogramming Demo Complete!")
print("   Ø§Ù„ÙƒÙˆØ¯ ÙŠØ³ØªØ·ÙŠØ¹ Ø§Ù„Ø¢Ù† ØªØ¹Ø¯ÙŠÙ„ Ù†ÙØ³Ù‡! ğŸš€")
print("â•" * 60)

