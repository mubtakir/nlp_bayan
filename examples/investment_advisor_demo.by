#!/usr/bin/env bayan
# ============================================================================
# ğŸ’¹ Ø§Ù„Ù…Ø³ØªØ´Ø§Ø± Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠ Ø§Ù„Ø°ÙƒÙŠ
# Smart Investment Advisor
# ============================================================================
# Ø§Ù„ØªØ­Ø¯ÙŠ: Ø¨Ù†Ø§Ø¡ Ù…Ø­ÙØ¸Ø© Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ© Ù…ØªÙˆØ§Ø²Ù†Ø© < 350 Ø³Ø·Ø±
# ============================================================================

# Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ© (IDØŒ Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„Ù†ÙˆØ¹ØŒ Ø§Ù„Ø¹Ø§Ø¦Ø¯_Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ØŒ Ø§Ù„Ù…Ø®Ø§Ø·Ø±ØŒ Ø§Ù„Ø³ÙŠÙˆÙ„Ø©)
fact: investment("I001", "Ø£Ø³Ù‡Ù…_ØªÙ‚Ù†ÙŠØ©", "stocks", 12, "high", "high").
fact: investment("I002", "Ø£Ø³Ù‡Ù…_Ø¨Ù†ÙˆÙƒ", "stocks", 8, "medium", "high").
fact: investment("I003", "Ø³Ù†Ø¯Ø§Øª_Ø­ÙƒÙˆÙ…ÙŠØ©", "bonds", 4, "low", "medium").
fact: investment("I004", "Ø³Ù†Ø¯Ø§Øª_Ø´Ø±ÙƒØ§Øª", "bonds", 6, "medium", "medium").
fact: investment("I005", "Ø¹Ù‚Ø§Ø±_Ø³ÙƒÙ†ÙŠ", "real_estate", 7, "medium", "low").
fact: investment("I006", "Ø¹Ù‚Ø§Ø±_ØªØ¬Ø§Ø±ÙŠ", "real_estate", 9, "medium", "low").
fact: investment("I007", "Ø°Ù‡Ø¨", "commodities", 5, "low", "high").
fact: investment("I008", "ØµÙ†Ø§Ø¯ÙŠÙ‚_Ù…Ø¤Ø´Ø±Ø§Øª", "funds", 10, "medium", "high").
fact: investment("I009", "ØµÙƒÙˆÙƒ_Ø¥Ø³Ù„Ø§Ù…ÙŠØ©", "islamic", 5.5, "low", "medium").
fact: investment("I010", "Ø£Ø³Ù‡Ù…_Ø£Ø±Ø§Ù…ÙƒÙˆ", "stocks", 7, "low", "high").

# Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø³ØªØ«Ù…Ø±ÙŠÙ† (IDØŒ Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„Ø¹Ù…Ø±ØŒ Ø§Ù„Ø¯Ø®Ù„_Ø§Ù„Ø´Ù‡Ø±ÙŠØŒ Ø§Ù„Ù…Ø¯Ø®Ø±Ø§ØªØŒ ØªØ­Ù…Ù„_Ø§Ù„Ù…Ø®Ø§Ø·Ø±)
fact: investor("INV001", "Ø£Ø­Ù…Ø¯", 25, 15000, 50000, "high").
fact: investor("INV002", "ÙØ§Ø·Ù…Ø©", 45, 25000, 500000, "low").
fact: investor("INV003", "Ø®Ø§Ù„Ø¯", 35, 20000, 200000, "medium").
fact: investor("INV004", "Ù†ÙˆØ±Ø©", 55, 30000, 800000, "low").

# Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ© (ID Ø§Ù„Ù…Ø³ØªØ«Ù…Ø±ØŒ Ø§Ù„Ù‡Ø¯ÙØŒ Ø§Ù„Ù…Ø¯Ø©_Ø¨Ø§Ù„Ø³Ù†ÙˆØ§ØªØŒ Ø§Ù„Ù…Ø¨Ù„Øº_Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù)
fact: investment_goal("INV001", "retirement", 35, 2000000).
fact: investment_goal("INV002", "children_education", 10, 500000).
fact: investment_goal("INV003", "wealth_growth", 15, 1000000).
fact: investment_goal("INV004", "income_generation", 5, 100000).

# ØªÙˆØ§ÙÙ‚ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± Ù…Ø¹ ØªØ­Ù…Ù„ Ø§Ù„Ù…Ø®Ø§Ø·Ø±
rule: suitable_investment(InvestorId, InvestmentId, Investment, Return) :-
    investor(InvestorId, _, _, _, _, RiskTolerance),
    investment(InvestmentId, Investment, _, Return, Risk, _),
    ((RiskTolerance = "high") ;
     (RiskTolerance = "medium", Risk \= "high") ;
     (RiskTolerance = "low", Risk = "low")).

# Ø¨Ù†Ø§Ø¡ Ù…Ø­ÙØ¸Ø© Ù…ØªÙ†ÙˆØ¹Ø©
rule: diversified_portfolio(InvestorId, Stocks, Bonds, RealEstate, Others) :-
    investor(InvestorId, _, Age, _, Savings, RiskTolerance),
    (Age < 35 -> StockRatio = 0.6, BondRatio = 0.2, RERatio = 0.15, OtherRatio = 0.05 ;
     Age < 50 -> StockRatio = 0.5, BondRatio = 0.3, RERatio = 0.15, OtherRatio = 0.05 ;
     StockRatio = 0.3, BondRatio = 0.5, RERatio = 0.15, OtherRatio = 0.05),
    Stocks is Savings * StockRatio,
    Bonds is Savings * BondRatio,
    RealEstate is Savings * RERatio,
    Others is Savings * OtherRatio.

# Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ø§Ø¦Ø¯ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ Ù„Ù„Ù…Ø­ÙØ¸Ø©
rule: portfolio_return(InvestorId, ExpectedReturn) :-
    diversified_portfolio(InvestorId, Stocks, Bonds, RE, Others),
    investor(InvestorId, _, _, _, Savings, _),
    StockReturn is (Stocks / Savings) * 10,
    BondReturn is (Bonds / Savings) * 5,
    REReturn is (RE / Savings) * 7,
    OtherReturn is (Others / Savings) * 5.5,
    ExpectedReturn is StockReturn + BondReturn + REReturn + OtherReturn.

# ØªÙˆØµÙŠØ§Øª Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ©
rule: investment_recommendation(InvestorId, InvestmentId, Reason, Amount) :-
    suitable_investment(InvestorId, InvestmentId, _, _),
    diversified_portfolio(InvestorId, Stocks, Bonds, RE, Others),
    investment(InvestmentId, _, Type, _, _, _),
    ((Type = "stocks", Amount = Stocks, Reason = "growth_potential") ;
     (Type = "bonds", Amount = Bonds, Reason = "stability") ;
     (Type = "real_estate", Amount = RE, Reason = "long_term_value") ;
     (Type = "islamic", Amount = Others, Reason = "shariah_compliant")).

# ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø®Ø§Ø·Ø±
rule: risk_analysis(InvestorId, RiskLevel, Recommendation) :-
    investor(InvestorId, _, Age, Income, Savings, RiskTolerance),
    SavingsToIncomeRatio is Savings / (Income * 12),
    ((RiskTolerance = "high", Age < 40, SavingsToIncomeRatio > 2) ->
        RiskLevel = "acceptable", Recommendation = "aggressive_growth" ;
     (RiskTolerance = "medium") ->
        RiskLevel = "moderate", Recommendation = "balanced_growth" ;
        RiskLevel = "conservative", Recommendation = "capital_preservation").

# Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª
query: suitable_investment("INV001", InvestmentId, Investment, Return).
query: diversified_portfolio("INV003", Stocks, Bonds, RealEstate, Others).
query: portfolio_return("INV001", ExpectedReturn).
query: investment_recommendation("INV002", InvestmentId, Reason, Amount).
query: risk_analysis("INV001", RiskLevel, Recommendation).
