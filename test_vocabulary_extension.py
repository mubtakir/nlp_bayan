#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
ุงุฎุชุจุงุฑ ุทุจูุฉ ุงููุนุฌู ุงููุณูุทุฉ
Test Vocabulary Extension Layer
"""

import sys
import os

# ุฅุถุงูุฉ ูุณุงุฑ ุงููุดุฑูุน
sys.path.insert(0, os.path.dirname(os.path.abspath(__file__)))

from bayan.bayan.vocabulary_extension import create_vocabulary_enhanced_interpreter
from bayan.bayan.lexer import HybridLexer
from bayan.bayan.parser import HybridParser

def print_header(title):
    """ุทุจุงุนุฉ ุนููุงู ููุณู"""
    print("\n" + "="*70)
    print(f"  {title}")
    print("="*70)

def test_vocabulary_extension():
    """ุงุฎุชุจุงุฑ ุทุจูุฉ ุงููุนุฌู ุงููุณูุทุฉ"""
    
    print("""
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                                                                  โ
โ           ๐ ุงุฎุชุจุงุฑ ุทุจูุฉ ุงููุนุฌู ุงููุณูุทุฉ                        โ
โ           Vocabulary Extension Layer Test                       โ
โ                                                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
""")
    
    # ุฅูุดุงุก ููุณุฑ ูุญุณูู
    print("๐ ุฅูุดุงุก ููุณุฑ ูุญุณูู ูุน ูุธุงู ุงููุนุฌู...")
    interpreter = create_vocabulary_enhanced_interpreter()
    
    # โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    # ุงุฎุชุจุงุฑ 1: ุงูุจุญุซ ุนู ูููุฉ
    # โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    
    print_header("๐ ุงุฎุชุจุงุฑ 1: ุงูุจุญุซ ุนู ูููุฉ")
    
    code1 = """
hybrid {
    # ุงูุจุญุซ ุนู ูููุฉ ูู ุงููุงููุณ ุงูุฃุณุงุณู
    result1 = ุงุจุญุซ_ูููุฉ("ุฃุฑุถ")
    print("ุงููููุฉ:", result1["ุงููููุฉ"])
    print("ุงููุตุฏุฑ:", result1["ุงููุตุฏุฑ"])
    print("ุงููุนูู:", result1["ุงููุนูู"])
    print("ุงูููุน:", result1["ุงูููุน"])
    print("")
    
    # ุงูุจุญุซ ุนู ูููุฉ ุฃุฎุฑู
    result2 = ุงุจุญุซ_ูููุฉ("ุดูุณ")
    print("ุงููููุฉ:", result2["ุงููููุฉ"])
    print("ุงููุฆุฉ:", result2["ุงููุฆุฉ"])
    print("ุงูุฌุฐุฑ:", result2["ุงูุฌุฐุฑ"])
}
"""
    
    try:
        lexer = HybridLexer(code1)
        tokens = lexer.tokenize()
        parser = HybridParser(tokens)
        ast = parser.parse()
        interpreter.interpret(ast)
    except Exception as e:
        print(f"โ ุฎุทุฃ: {e}")
    
    # โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    # ุงุฎุชุจุงุฑ 2: ุงูุจุญุซ ุจุงูุฌุฐุฑ
    # โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    
    print_header("๐ ุงุฎุชุจุงุฑ 2: ุงูุจุญุซ ุจุงูุฌุฐุฑ")
    
    code2 = """
hybrid {
    # ุงูุจุญุซ ุจุงูุฌุฐุฑ (ุฅุฐุง ูุงู Arramooz ูุชุงุญุงู)
    results = ุงุจุญุซ_ุจุงูุฌุฐุฑ("ูุชุจ")
    print("ุนุฏุฏ ุงููุชุงุฆุฌ:", len(results))
    
    if len(results) > 0 {
        print("ุฃูู 3 ูููุงุช:")
        for i in range(min(3, len(results))) {
            print("  โข", results[i]["ุงููููุฉ"], "-", results[i]["ุงูููุน"])
        }
    }
}
"""
    
    try:
        lexer = HybridLexer(code2)
        tokens = lexer.tokenize()
        parser = HybridParser(tokens)
        ast = parser.parse()
        interpreter.interpret(ast)
    except Exception as e:
        print(f"โ ุฎุทุฃ: {e}")
    
    # โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    # ุงุฎุชุจุงุฑ 3: ุงููููุงุช ุญุณุจ ุงูููุน
    # โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    
    print_header("๐ ุงุฎุชุจุงุฑ 3: ุงููููุงุช ุญุณุจ ุงูููุน")
    
    code3 = """
hybrid {
    # ุงูุญุตูู ุนูู ุฌููุน ุงูุฃูุนุงู
    actions = ูููุงุช_ุญุณุจ_ุงูููุน("ูุนู")
    print("ุนุฏุฏ ุงูุฃูุนุงู:", len(actions))
    print("ุฃูู 5 ุฃูุนุงู:")
    
    for i in range(min(5, len(actions))) {
        word = actions[i]
        print("  โข", word["ุงููููุฉ"], "-", word["ุงููุนูู"][:30] + "...")
    }
}
"""
    
    try:
        lexer = HybridLexer(code3)
        tokens = lexer.tokenize()
        parser = HybridParser(tokens)
        ast = parser.parse()
        interpreter.interpret(ast)
    except Exception as e:
        print(f"โ ุฎุทุฃ: {e}")
    
    # โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    # ุงุฎุชุจุงุฑ 4: ุงููููุงุช ุญุณุจ ุงููุฆุฉ
    # โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    
    print_header("๐ท๏ธ ุงุฎุชุจุงุฑ 4: ุงููููุงุช ุญุณุจ ุงููุฆุฉ")
    
    code4 = """
hybrid {
    # ุงูุญุตูู ุนูู ูููุงุช ุงูุจูุฆุฉ ุงูุฃูููุฉ
    env_words = ูููุงุช_ุญุณุจ_ุงููุฆุฉ("ุงูุจูุฆุฉ_ุงูุฃูููุฉ")
    print("ูููุงุช ุงูุจูุฆุฉ ุงูุฃูููุฉ:", len(env_words))
    
    for word in env_words {
        print("  โข", word["ุงููููุฉ"], "=", word["ุงููุนูู"])
    }
}
"""
    
    try:
        lexer = HybridLexer(code4)
        tokens = lexer.tokenize()
        parser = HybridParser(tokens)
        ast = parser.parse()
        interpreter.interpret(ast)
    except Exception as e:
        print(f"โ ุฎุทุฃ: {e}")
    
    # โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    # ุงุฎุชุจุงุฑ 5: ุงูุจุญุซ ุจุงููุนูู
    # โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    
    print_header("๐ ุงุฎุชุจุงุฑ 5: ุงูุจุญุซ ุจุงููุนูู")
    
    code5 = """
hybrid {
    # ุงูุจุญุซ ุนู ูููุงุช ุชุญุชูู ุนูู "ูุงุก"
    water_words = ุงุจุญุซ_ุจุงููุนูู("ูุงุก")
    print("ูููุงุช ุชุญุชูู ุนูู 'ูุงุก':", len(water_words))
    
    for word in water_words {
        print("  โข", word["ุงููููุฉ"], "-", word["ุงููุนูู"][:40] + "...")
    }
}
"""
    
    try:
        lexer = HybridLexer(code5)
        tokens = lexer.tokenize()
        parser = HybridParser(tokens)
        ast = parser.parse()
        interpreter.interpret(ast)
    except Exception as e:
        print(f"โ ุฎุทุฃ: {e}")
    
    # โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    # ุงุฎุชุจุงุฑ 6: ุงูุฅุญุตุงุฆูุงุช
    # โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    
    print_header("๐ ุงุฎุชุจุงุฑ 6: ุงูุฅุญุตุงุฆูุงุช")
    
    code6 = """
hybrid {
    # ุฅุญุตุงุฆูุงุช ุงููุนุฌู ุงูููุญุฏ
    lexicon_stats = ุฅุญุตุงุฆูุงุช_ุงููุนุฌู()
    print("๐ ุฅุญุตุงุฆูุงุช ุงููุนุฌู ุงูููุญุฏ:")
    print("  โโ ุงููููุงุช ุงูุฃุณุงุณูุฉ:", lexicon_stats["ูููุงุช_ุฃุณุงุณูุฉ"])
    print("  โโ ูููุงุช ุงูุฑููุฒ:", lexicon_stats["ูููุงุช_ุงูุฑููุฒ"])
    print("  โโ ุงููุฌููุน:", lexicon_stats["ุงููุฌููุน"])
    print("  โโ ูุนุฏู ุงูุฅุตุงุจุฉ:", lexicon_stats["ูุนุฏู_ุงูุฅุตุงุจุฉ"])
    print("")
    
    # ุฅุญุตุงุฆูุงุช ุงููุงููุณ ุงูุฃุณุงุณู
    foundation_stats = ุฅุญุตุงุฆูุงุช_ุงููุงููุณ()
    print("๐ ุฅุญุตุงุฆูุงุช ุงููุงููุณ ุงูุฃุณุงุณู:")
    print("  โโ ุงููุฌููุน:", foundation_stats["ุงููุฌููุน"])
    print("  โโ ุนุฏุฏ ุงูุฃููุงุน:", len(foundation_stats["ุญุณุจ_ุงูููุน"]))
    print("  โโ ุนุฏุฏ ุงููุฆุงุช:", len(foundation_stats["ุญุณุจ_ุงููุฆุฉ"]))
}
"""
    
    try:
        lexer = HybridLexer(code6)
        tokens = lexer.tokenize()
        parser = HybridParser(tokens)
        ast = parser.parse()
        interpreter.interpret(ast)
    except Exception as e:
        print(f"โ ุฎุทุฃ: {e}")
    
    # โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    # ุงุฎุชุจุงุฑ 7: ุงููููุงุช ุงููุฑุชุจุทุฉ
    # โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    
    print_header("๐ ุงุฎุชุจุงุฑ 7: ุงููููุงุช ุงููุฑุชุจุทุฉ")
    
    code7 = """
hybrid {
    # ุฅูุฌุงุฏ ูููุงุช ูุฑุชุจุทุฉ ุจู "ุถูุก"
    related = ูููุงุช_ูุฑุชุจุทุฉ("ุถูุก")
    print("ูููุงุช ูุฑุชุจุทุฉ ุจู 'ุถูุก':")
    for word in related {
        print("  โข", word)
    }
}
"""
    
    try:
        lexer = HybridLexer(code7)
        tokens = lexer.tokenize()
        parser = HybridParser(tokens)
        ast = parser.parse()
        interpreter.interpret(ast)
    except Exception as e:
        print(f"โ ุฎุทุฃ: {e}")
    
    # ุงูุฎุงุชูุฉ
    print_header("โ ุงูุชูุช ุฌููุน ุงูุงุฎุชุจุงุฑุงุช")
    print("""
๐ ุงูุฎูุงุตุฉ:
  โข ุทุจูุฉ ุงููุนุฌู ุงููุณูุทุฉ ุชุนูู ุจูุฌุงุญ โ
  โข ูููู ุงุณุชุฎุฏุงู ุฏูุงู ุงููุนุฌู ูู ููุฏ ุจูุงู ูุจุงุดุฑุฉ โ
  โข ุงููุธุงู ุงูููุญุฏ ูุฏูุฌ 105 ูููุฉ ุฃุณุงุณูุฉ + 40,850 ูููุฉ โ
  โข ุฌููุน ุงูุฏูุงู ูุชุงุญุฉ ุจุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ โ

๐ฏ ุงูุฏูุงู ุงููุชุงุญุฉ:
  โข ุงุจุญุซ_ูููุฉ() - ุงูุจุญุซ ุนู ูููุฉ
  โข ุงุจุญุซ_ุจุงูุฌุฐุฑ() - ุงูุจุญุซ ุจุงูุฌุฐุฑ
  โข ุจุญุซ_ูุชูุฏู() - ุจุญุซ ูุชูุฏู
  โข ูููุงุช_ุญุณุจ_ุงูููุน() - ุชุตููู ุญุณุจ ุงูููุน
  โข ูููุงุช_ุญุณุจ_ุงููุฆุฉ() - ุชุตููู ุญุณุจ ุงููุฆุฉ
  โข ุงุจุญุซ_ุจุงููุนูู() - ุงูุจุญุซ ุจุงููุนูู
  โข ูููุงุช_ูุฑุชุจุทุฉ() - ุงููููุงุช ุงููุฑุชุจุทุฉ
  โข ุฅุญุตุงุฆูุงุช_ุงููุนุฌู() - ุฅุญุตุงุฆูุงุช ุงููุธุงู
  โข ุฅุญุตุงุฆูุงุช_ุงููุงููุณ() - ุฅุญุตุงุฆูุงุช ุงููุงููุณ ุงูุฃุณุงุณู

๐ ุจุงูุชูููู!
""")

if __name__ == "__main__":
    try:
        test_vocabulary_extension()
    except KeyboardInterrupt:
        print("\n\nโ๏ธ  ุชู ุฅููุงู ุงูุจุฑูุงูุฌ")
    except Exception as e:
        print(f"\nโ ุฎุทุฃ ุบูุฑ ูุชููุน: {str(e)}")
        import traceback
        traceback.print_exc()
