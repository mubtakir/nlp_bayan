# مخطط عام للنموذج اللغوي التوليدي في بيان (طبقة التصوّر فوق النموذج الوجودي)

## 1. الهدف العام

هذا المستند يحدد **التصميم المفاهيمي العام** لنموذج لغوي توليدي في لغة بيان، بحيث:

- لا يقيّد المبرمج بأمثلة خاصة ("أحمد"، "زيد"، ...)،
- بل يعرّف **طبقات عامة** (اسم، كيان، فعل، حدث، خاصية، فكرة، نتيجة)،
- يستغل قدرات بيان الموجودة:
  - النموذج الوجودي (Existential Model)،
  - نظام الكيانات والخصائص [0..1] والمعادلات والأضداد (Entity System),
  - النموذج المعرفي–الدلالي (Cognitive-Semantic Model)،
  - الشبكات الدلالية والمعرفة،
  - أدوات التصور (Visualization)،
- ليكون **النموذج اللغوي طبقة ثانية فوق طبقة التصوّر**، لا مجرد مولّد نص.

هذا المخطط موجّه كـ **ورقة زرقاء (Blueprint)** للمبرمجين، لا كأمثلة نهائية.

---

## 2. طبقات النموذج

يُقترح تنظيم النظام إلى أربع طبقات متراكبة، من الأعم إلى الأخص:

### 2.1 طبقة الوجود والكيانات (Existential + Entity Layer)

تعتمد على:
- `EXISTENTIAL_MODEL_GUIDE.md`
- `ENTITY_SYSTEM_GUIDE.md`
- `ENHANCED_EXISTENTIAL_MODEL.md`

دورها:
- تعريف **مجالات معرفية** عامة: `مجال / domain`.
- تعريف **بيئات** لهذه المجالات: `بيئة / environment`.
- تعريف **كائنات وجودية**: `كائن_وجودي / existential_being`.
- تعريف **كيانات حالة/خصائص**: `كيان / entity` مع:
  - حالات (states) ∈ [0..1]
  - خصائص (properties) ∈ [0..1] أو numeric/bounded
  - أفعال (actions) وتأثيرات (effects)
  - ردود أفعال (reactions)
- تعريف **معادلات** و **أضداد**:
  - `عرّف_متمم`, `عرّف_أضداد` / `define_complement`, `define_opposites`
  - لتمثيل محاور مثل: حر/برد، نعم/لا، جميل/قبيح، إلخ، ضمن محور واحد مجموعُه 1.0.
- تسجيل الأحداث كحقائق منطقية وسجل زمني:
  - `event/4`, `changed/4`, `state/3`, `property/3`,
  - وواجهات لغوية مثل `describe_events`, `نص_الأحداث`.

هذه الطبقة تمثّل **"العالم"**: الكيانات في بيئاتها، خصائصها، أفعالها، وتحولاتها.

### 2.2 طبقة الديناميكيات التصورية (Conceptual Dynamics Layer)

طبقة فوق السابقة، مهمتها العمل بمستوى أكثر تجريدًا:

- تعريف **أنماط حالة** (State Patterns) عامة لكيان:
  - مثال مفهومي: نمط لكيان يمتلك خصائص معيّنة بدرجات ضمن حدود.
- تعريف **مطابقة مع سماح (tolerance)**:
  - دالة عامة (تصميميًا) من نوع:
    - `match(entity_state, pattern, tolerance) -> degree`،
  - تُستخدم لتقرير ما إذا كانت حالة كيان "قريبة بما يكفي" من قالب معيّن لتطبيق تحول ما.
- تعريف **أنماط تحوّل عامة**:
  - من شكل: "كيان بنمط حالة A، يتعرض لحدث من نوع B، في بيئة/مجال C → ينتقل إلى نمط حالة D".
- الاستفادة من:
  - معادلات System Entity،
  - الأضداد (Opposites)،
  - أنواع القيم (fuzzy, numeric, bounded)،
  - مع بقاء الأسماء عامة (Actor, Target, Property, Event...).

هذه الطبقة تصف **كيفية تغيّر العالم المفاهيمي** بصورة عامة، دون ربطها بمجال معيّن.

### 2.3 طبقة الجسر التصوّري–اللغوي (Concept–Language Bridge)

الهدف: ربط ما يحدث في طبقة التصوّر بما يُقال في اللغة الطبيعية.

تعتمد على:
- `COGNITIVE_SEMANTIC_GUIDE.md` (كيان_معرفي، حدث_معرفي، فكرة، قالب لغوي)،
- `ENTITY_SYSTEM_GUIDE.md` (القوالب اللغوية، عبارة، الصفات، الإضافة، الملكية)،
- الشبكات الدلالية (semantic networks).

دورها:
- تعريف **تنسيق موحّد للأثر التصوّري (Conceptual Trace)**، يشمل مثلاً:
  - قائمة أحداث مرتّبة زمنياً،
  - المشاركين في كل حدث (actors/targets + degrees)،
  - التغيّرات في الحالات/الخصائص لكل كيان،
  - القوانين/المعادلات التي فُعّلت.
- توفير **طبقة تعيين عامة** من هذا الأثر إلى عناصر لغوية:
  - فاعل، فعل، مفعول، ظروف (زمان/مكان/مجال)،
  - صفات (سعيد، حزين، مرتفع، منخفض...) مستندة إلى قيم [0..1] ومحاور الأضداد.
- استخدام **القوالب اللغوية** (pattern/قالب) و`عبارة/phrase` لتعريف صيغ عامة مثل:
  - "قام {فاعل} بـ {فعل} {مفعول}"
  - "انتقلت خاصية {خاصية} من {قيمة_قبل} إلى {قيمة_بعد}".

هذه الطبقة لا تملأ القوالب بأسماء/أفعال معينة، بل تعرّف **كيف** تُختار القوالب وتُملأ من trace لأي مجال.

### 2.4 طبقة النموذج اللغوي التوليدي (Generative LM Layer)

تعتمد على ما بُني في `ai/nlp`:
- أدوات النص (تطبيع، تجذيع، vocab، تسلسلات IDs، BOS/EOS، حشو، دفعات)،
- نماذج لغة إحصائية (bigram/trigram + تقييم: log_probs, CE, Perplexity)،
- إمكانية توسيع لاحقًا إلى نماذج أعمق أو ربط بنماذج خارجية.

دورها:
- استخدام مخرجات طبقة الجسر التصوّري–اللغوي:
  - كبيانات تدريب (trace → نص)،
  - وكمدخلات عند الإنتاج (توليد صياغات متعدّدة لعبارة تصورية واحدة).
- توفير **قياسات جودة لغوية** (perplexity، إلخ) لمساعدة الطبقات العليا على اختيار التعبيرات الأفضل.

بهذا تصبح اللغة **طبقة ثانية** فوق عالم التصوّر، لا العكس.

---

## 3. تنسيق الأثر التصوّري (Conceptual Trace Format)

كمخطط عام، يمكن اعتبار الأثر التصوّري هيكلًا يحتوي على الأقل:

- `entities`:
  - تعريف عام للكيانات النشطة في المشهد (أسماء مجردة، خصائص، حالات).
- `events` (مرتّبة زمنياً):
  - لكل حدث:
    - `actors`: قائمة كيانات وأدوار ودرجات مشاركة.
    - `targets`: قائمة كيانات متأثرة.
    - `action`: اسم الفعل المجرد (غير لغوي بالضرورة).
    - `domain` / `environment`: المجال/البيئة.
    - `state_changes`: قائمة تغيّرات (key, old, new) كما يسجلها محرك الكيانات.
    - `laws_applied`: القوانين/المعادلات التي تم تفعيلها (اختياري).
- `ideas` (اختياري):
  - تمثيلات أعلى لمفهوم "فكرة": كيانات + حدث + نتيجة.

هذا التنسيق لا يفرض أسماء معيّنة؛ المبرمج يملؤه حسب مجاله، والطبقات العليا (الجسر + LM) تقرر كيف تُعبّر عنه لغويًّا.

---

## 4. أسئلة تصميم مفتوحة (للمراحل اللاحقة)

1. **تعريف رسمي لدالة المطابقة مع السماح (tolerance)**:
   - ما هي المسافة/القياس المناسب بين حالة كيان وقالب حالة؟
2. **خريطة قياسية بين قيم [0..1] والتعابير اللفظية**:
   - كيف نضع قواعد عامة (قابلة للتخصيص) لتحويل 0.2/0.5/0.8 إلى "ضعيف/متوسط/عالٍ" لكل محور؟
3. **نموذج الحوار (Dialogue Model)** فوق هذه الطبقات:
   - كيف يُمثَّل سياق الحوار كأثر تصوّري متجدد + تاريخ لغوي؟
4. **تكامل أعمق مع الشبكات الدلالية**:
   - كيف تُستخدم شبكات المعاني (نور/ظلام، صفر/لانهاية، ...) لإغناء طبقة التصوّر والمعجم اللغوي؟

هذا المستند لا يقدّم حلولًا تنفيذية نهائية، بل يضع الإطار العام الذي يجب أن تُصمَّم داخله المكتبات المستقبلية للنموذج اللغوي التوليدي في بيان.
