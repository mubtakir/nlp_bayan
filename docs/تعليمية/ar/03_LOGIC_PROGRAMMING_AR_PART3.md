# الجزء الثالث (الجزء 3): مواد متقدمة ومنطق هجين

<div dir="rtl">

> (قريبًا) Meta-predicates، قاعدة معرفة ديناميكية، البرمجة الهجينة.



## 10. Meta-predicates

### 10.1 findall/3
```bayan
هجين {
    درجة("أحمد", 85). درجة("فاطمة", 92). درجة("علي", 78). درجة("سارة", 95).

    النتائج = استعلام findall(?درجة, درجة(?اسم, ?درجة), ?كل_الدرجات)?
    لكل ن في النتائج: { اطبع(ن["?كل_الدرجات"]) }  # [85, 92, 78, 95]
}
```

### 10.2 findall مع شرط
```bayan
هجين {
    درجة("أحمد", 85). درجة("فاطمة", 92). درجة("علي", 78). درجة("سارة", 95).

    الهدف = درجة(?اسم, ?درجة), ?درجة > 80
    النتائج = استعلام findall(?درجة, الهدف, ?درجات_عالية)?
    لكل ن في النتائج: { اطبع(ن["?درجات_عالية"]) }  # [85, 92, 95]
}
```

### 10.3 bagof/3
```bayan
هجين {
    عضو_صف("أحمد", "صف_أ"). عضو_صف("فاطمة", "صف_أ"). عضو_صف("علي", "صف_ب").
    درجة("أحمد", 85). درجة("فاطمة", 92). درجة("علي", 78).

    الهدف = عضو_صف(?اسم, "صف_أ"), درجة(?اسم, ?درجة)
    النتائج = استعلام bagof(?درجة, الهدف, ?درجات_صف_أ)?
    لكل ن في النتائج: { اطبع(ن["?درجات_صف_أ"]) }  # [85, 92]
}
```

### 10.4 setof/3
```bayan
هجين {
    يحب("أحمد", "برمجة"). يحب("فاطمة", "برمجة"). يحب("علي", "رياضيات"). يحب("سارة", "برمجة").

    النتائج = استعلام setof(?مادة, يحب(?شخص, ?مادة), ?مواد)?
    لكل ن في النتائج: { اطبع(ن["?مواد"]) }  # ["برمجة", "رياضيات"]
}
```


## 11. قاعدة المعرفة الديناميكية

### 11.1 assertz - إضافة حقيقة في النهاية
```bayan
هجين {
    طالب("أحمد"). طالب("فاطمة").
    assertz(طالب("علي"))
    النتائج = استعلام طالب(?طالب)?
    لكل ن في النتائج: { اطبع(ن["?طالب"]) }  # أحمد، فاطمة، علي
}
```

### 11.2 asserta - إضافة حقيقة في البداية
```bayan
هجين {
    أولوية("task2", 2). أولوية("task3", 3).
    asserta(أولوية("task1", 1))
    النتائج = استعلام أولوية(?مهمة, ?أولوية)?
    لكل ن في النتائج: { اطبع(ن["?مهمة"]) }  # task1، task2، task3
}
```

### 11.3 retract - حذف حقيقة
```bayan
هجين {
    طالب("أحمد"). طالب("فاطمة"). طالب("علي").
    retract(طالب("فاطمة"))
    النتائج = استعلام طالب(?طالب)?
    لكل ن في النتائج: { اطبع(ن["?طالب"]) }  # أحمد، علي
}
```

### 11.4 retractall - حذف جميع المطابق
```bayan
هجين {
    بيانات_مؤقتة("item1", 100). بيانات_مؤقتة("item2", 200). بيانات_مؤقتة("item3", 300).
    retractall(بيانات_مؤقتة(?عنصر, ?قيمة))
    اطبع(len(استعلام بيانات_مؤقتة(?عنصر, ?قيمة)?))  # 0
}
```

## 12. البرمجة الهجينة (دمج الإجرائي + الكائني + المنطقي)
```bayan
هجين {
    # جزء إجرائي
    دالة مكافأة(درجة): { ارجع درجة + 5 }

    # حقائق
    درجة("أحمد", 85). درجة("سارة", 95).

    # استعلام منطقي ثم استخدام الجزء الإجرائي
    النتائج = استعلام درجة(?اسم, ?د)?
    لكل ن في النتائج: {
        د = ن["?د"]
        اطبع(مكافأة(د))
    }
}
```

> التالي: [PART4](03_LOGIC_PROGRAMMING_AR_PART4.md) | السابق: [PART2](03_LOGIC_PROGRAMMING_AR_PART2.md)
