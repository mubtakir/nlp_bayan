# المنطق في لغة البيان (٦): الكيانات والمعادلات والمشغلات اللغوية والفكرة–الحدث–النتيجة

<div dir="rtl">

> في هذا الجزء ننتقل من المنطق المجرد إلى **عالم الحالات والتأثيرات والمعاني**:
> - الكيانات (حالات وخصائص وأفعال وردود أفعال).
> - المعادلات التي تربط الحالات ببعضها.
> - المشغلات اللغوية مثل `اذهب` و`أثّر` و`أكل`.
> - نموذج الفكرة–الحدث–النتيجة عبر `فكرة` و`حدث_معرفي` و`كيان_معرفي`.
>
> سنلتزم بأكبر قدر ممكن بالكلمات المفتاحية العربية، مع استخدام `hybrid` فقط كبوابة تقنية.

## ١. الكيانات: تمثيل شخص أو شيء بحالات وأفعال

### ١٫١ مثال بسيط: جوع أحمد وفعل "تقديم_وجبة"

```bayan
هجين {
    كيان أحمد {
        حالات: {"جوع": 0.6, "تعب": 0.3},
        خصائص: {"عمر": {"نوع": "عددي", "قيمة": 20}},
        أفعال: {
            "تقديم_وجبة": {
                "قوة": 1.0,
                "تأثيرات": [
                    {"on": "جوع", "formula": "value - 0.5*action_value"}
                ]
            }
        }
    }

    كيان مطعم {
        أفعال: {
            "تقديم_وجبة": {"قوة": 1.0, "تأثيرات": []}
        }
    }

    طبق مطعم.تقديم_وجبة(أحمد, قيمة_الفعل=1.0)
}
```

- الكيان `أحمد` يملك حالة `"جوع"` بضبابية 0.6.
- عندما ننفّذ `طبق مطعم.تقديم_وجبة(أحمد, قيمة_الفعل=1.0)` تُطبَّق المعادلة
  `value - 0.5*action_value` على حالة جوع أحمد.

### ١٫٢ قراءة حالة الكيان (بواجة عربية)

محرك الكيانات يولّد حقيقة منطقية باسم `state(Entity, Key, Value)`.

يمكننا تغليفها بعلاقة عربية:

```bayan
هجين {
    حالة(?كيان, ?مفتاح, ?قيمة) :- state(?كيان, ?مفتاح, ?قيمة).
}
استعلام حالة("أحمد", "جوع", ?قيمة)?
```

بهذا الشكل يبقى الكود التعليمي عربيًا، مع استخدام `state/3` داخليًا فقط.

## ٢. المعادلات: ربط الحالات تلقائيًا (أضداد وتكميل)

### ٢٫١ تعريف أضداد: حر ↔ برد

```bayan
هجين {
    كيان الطقس {
        "حالات": {
            "حر":  {"نوع": "ضبابي", "قيمة": 0.0},
            "برد": {"نوع": "ضبابي", "قيمة": 1.0}
        }
    }

    عرّف_أضداد("الطقس", "حالة", "حر", "برد", 1.0)
    عين_حالة("الطقس", "برد", 0.2)
}

هجين {
    حالة(?كيان, ?مفتاح, ?قيمة) :- state(?كيان, ?مفتاح, ?قيمة).
}
استعلام حالة("الطقس", "حر", ?حرارة_حر)?
```

- `عرّف_أضداد` تجعل `حر` و`برد` يكملان بعضهما إلى 1.0.
- عندما نضبط `برد = 0.2` تصبح قيمة `حر ≈ 0.8` تلقائيًا.

## ٣. المشغلات اللغوية: اذهب، أثّر، أكل، اربط، حوّل

### ٣٫١ مثال: مشغل "اذهب" لحركة كيان على المحور س

```bayan
هجين {
    كيان أحمد {
        "خصائص": {"س": {"نوع": "عددي", "قيمة": 0.0}},
        "أفعال": {
            "اذهب": {
                "تأثيرات": [
                    {"on": "س", "formula": "value + 2*sensitivity"}
                ]
            }
        }
    }

    اذهب(["أحمد.0.5"])  # س += 1.0
}

هجين {
    خاصية(?كيان, ?مفتاح, ?قيمة) :- property(?كيان, ?مفتاح, ?قيمة).
}
استعلام خاصية("أحمد", "س", ?موضع)?
```

- `اذهب([...])` هو غلاف عربي فوق `perform("اذهب", participants, ...)`.
- نستخدم حساسية 0.5 فتصبح الزيادة `2 * 0.5 = 1.0`.

### ٣٫٢ تعريف مشغل لغوي مخصّص

```bayan
هجين {
    كيان دافع {
        "خصائص": {"س": {"نوع": "عددي", "قيمة": 0.0}},
        "أفعال": {
            "اذهب": {
                "تأثيرات": [
                    {"on": "س", "formula": "value + sensitivity"}
                ]
            }
        }
    }

    عرّف_مشغل("ادفع", action="اذهب")
    ادفع(["دافع:1.0"])  # يغلف perform("اذهب", ...)
}
```

بهذا يمكننا بناء مشغلات لغوية عربية تعبّر عن أفعال معقّدة فوق محرك الكيانات.

## ٤. نموذج الفكرة–الحدث–النتيجة (كيان_معرفي + حدث_معرفي + فكرة)

### ٤٫١ تعريف كيانات معرفية وأحداث معرفية

```bayan
هجين {
    كيان_معرفي أرض {
        لون: "بني",
        حالة: "جافة"
    }

    حدث_معرفي نزول_المطر {
        مشاركون: {
            "أرض": {"دور": "متأثر", "درجة": 1.0}
        },
        قوة: 0.8,
        تحويل: {
            "أرض.لون": "أخضر",
            "أرض.حالة": "رطبة"
        }
    }
}
```

### ٤٫٢ إطلاق الحدث وبناء فكرة تجمع الكيانات والنتيجة

```bayan
هجين {
    أطلق نزول_المطر
}

فكرة "الأرض الخضراء" {
    كيانات: {
        "أرض": {"حالة": "جافة"}
    },
    حدث: "نزول_المطر",
    نتيجة: {
        "تغييرات_الحالة": {
            "أرض.لون": "أخضر"
        }
    }
}
```

- `كيان_معرفي` يعرّف كيانًا لغويًا/معرفيًا.
- `حدث_معرفي` يعرّف حدثًا يؤثر في الكيانات.
- `أطلق` ينفّذ الحدث ويغيّر حالة الكيانات.
- `فكرة` تربط بين الكيانات والحدث والنتيجة في نموذج واحد.

## ٥. خلاصة هذا الجزء

- تعرّفنا على **الكيانات** وكيف نمنحها حالات وأفعالًا وردود أفعال.
- رأينا كيف نستخدم **المعادلات** مثل `عرّف_أضداد` لربط الحالات تلقائيًا.
- استخدمنا **المشغلات اللغوية** (`اذهب`, `ادفع`, ...) كبوابة عربية لمحرك الأفعال.
- قدّمنا نموذج **الفكرة–الحدث–النتيجة** عبر `كيان_معرفي` و`حدث_معرفي` و`فكرة`.

بهذه اللبنات يمكن للبيان أن يجمع بين المنطق الكلاسيكي، والحالات الضبابية، والمعاني، والأحداث في نموذج واحد غني، عربيّ الواجهة.
ويزوّد أيضًا **طبقات Conceptual LM** (في الأجزاء ٩–١٠) بأثرٍ تصوّري منظَّم لما يحدث كي يُحوَّل لاحقًا إلى جمل عربية مفهومة.


</div>

