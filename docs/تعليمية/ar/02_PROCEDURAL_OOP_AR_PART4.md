# دليل لغة البيان - الجزء الثاني (الجزء 4): ميزات متقدمة

<div dir="rtl">

> يشمل: Decorators, Generators, Async/Await, Context Managers, *args/**kwargs.

(قريبًا) سيتم نقل المادة التفصيلية والأمثلة.



> التنقل السريع: [PART1](02_PROCEDURAL_OOP_AR_PART1.md) | [PART2](02_PROCEDURAL_OOP_AR_PART2.md) | [PART3](02_PROCEDURAL_OOP_AR_PART3.md) | [PART4](02_PROCEDURAL_OOP_AR_PART4.md)


## 15. Decorators

### 15.1 Decorator بسيط
```bayan
هجين {
    دالة مزخرفي(دالة): {
        دالة غلاف(): {
            اطبع("قبل التنفيذ")
            النتيجة = دالة()
            اطبع("بعد التنفيذ")
            ارجع النتيجة
        }
        ارجع غلاف
    }

    @مزخرفي
    دالة تحية(): {
        اطبع("مرحباً!")
    }

    تحية()
}
```

---

## 16. Generators

### 16.1 Generator بسيط
```bayan
هجين {
    دالة عد_حتى(ن): {
        ع = 1
        بينما ع <= ن: {
            انتج ع
            ع = ع + 1
        }
    }

    لكل س في عد_حتى(3): { اطبع(س) }  # 1, 2, 3
}
```

---

## 17. Async/Await

### 17.1 دالة async بسيطة
```bayan
هجين {
    غير_متزامن دالة جلب(): { ارجع 42 }

    غير_متزامن دالة رئيسية(): {
        ق = انتظر جلب()
        اطبع(ق)
    }

    # ملاحظة: التنفيذ الفعلي يعتمد بيئة التشغيل
    # هنا نعرض البنية فقط
}
```

---

## 18. Context Managers

### 18.1 استخدام with
```bayan
هجين {
    صنف مدير_ملفات: {
        دالة __init__(الذات, مسار): { الذات.مسار = مسار }
        دالة __enter__(الذات): { اطبع("فتح الملف"); ارجع الذات }
        دالة __exit__(الذات, نوع_الخطأ, خطأ, تتبع): { اطبع("إغلاق الملف") }
        دالة اكتب(الذات, نص): { اطبع("كتابة:", نص) }
    }

    مع مدير_ملفات("/tmp/demo.txt") كـ م: {
        م.اكتب("مرحبا")
    }
}
```

---

## 19. *args و **kwargs

### 19.1 استخدام *args
```bayan
هجين {
    دالة مجموع_الكل(*أرقام): {
        م = 0
        لكل ر في أرقام: { م = م + ر }
        ارجع م
    }

    اطبع(مجموع_الكل(1, 2, 3))  # 6
}
```

### 19.2 استخدام **kwargs
```bayan
هجين {
    دالة اطبع_معلومات(**معلومات): {
        لكل مفتاح في معلومات: { اطبع(مفتاح + ": " + str(معلومات[مفتاح])) }
    }

    اطبع_معلومات(اسم="بيان", اصدار="0.1.0")
}
```

---

## 20. الميزات المتقدمة الجديدة (2025)

### 20.1 مطابقة الأنماط (Match/Case)
```bayan
هجين {
    س = 2
    طابق س: {
        حالة 1: { اطبع("واحد") }
        حالة 2: { اطبع("اثنان") }
        حالة _: { اطبع("آخر") }
    }
}
```

### 20.2 التعدادات (Enum)
```bayan
هجين {
    تعداد اللون: {
        أحمر = 1
        أخضر = 2
        أزرق = 3
    }

    اطبع(اللون.أحمر)  # 1
}
```

### 20.3 العامل الثلاثي (Ternary)
```bayan
هجين {
    س = 10
    النتيجة = "كبير" اذا س > 5 والا "صغير"
    اطبع(النتيجة)  # كبير
}
```

### 20.4 تفكيك المجموعات
```bayan
هجين {
    أ، ب، ج = 1، 2، 3
    اطبع(أ، ب، ج)  # 1 2 3

    # تبديل القيم
    أ، ب = ب، أ
}
```

### 20.5 عامل النشر للقوائم
```bayan
هجين {
    قائمة1 = [1، 2، 3]
    قائمة2 = [4، 5، 6]
    قائمة3 = [*قائمة1، *قائمة2]
    اطبع(قائمة3)  # [1، 2، 3، 4، 5، 6]
}
```

### 20.6 نشر القواميس
```bayan
هجين {
    قاموس1 = {"أ": 1، "ب": 2}
    قاموس2 = {"ج": 3}
    مدمج = {**قاموس1، **قاموس2}
    اطبع(مدمج)  # {"أ": 1، "ب": 2، "ج": 3}
}
```

### 20.7 التقطيع العكسي
```bayan
هجين {
    أرقام = [1، 2، 3، 4، 5]
    اطبع(أرقام[::-1])  # [5، 4، 3، 2، 1]
}
```

### 20.8 المتغيرات العامة (Global)
```bayan
هجين {
    عداد = 0

    دالة زيادة(): {
        عام عداد
        عداد = عداد + 1
    }

    زيادة()
    زيادة()
    اطبع(عداد)  # 2
}
```

### 20.9 دمج القيم الفارغة
```bayan
هجين {
    س = لاشيء
    ص = س ?? 10
    اطبع(ص)  # 10
}
```

### 20.10 المقارنات المتسلسلة
```bayan
هجين {
    س = 5
    اذا 0 < س < 10: {
        اطبع("س بين 0 و 10")
    }
}
```

### 20.11 F-Strings (النصوص المنسقة)
```bayan
هجين {
    الاسم = "أحمد"
    العمر = 25
    اطبع(f"الاسم: {الاسم}، العمر: {العمر}")
}
```

### 20.12 الاستثناءات المحسنة
```bayan
هجين {
    دالة قسمة(أ، ب): {
        اذا ب == 0: {
            ارفع ValueError("لا يمكن القسمة على صفر")
        }
        ارجع أ / ب
    }

    حاول: {
        نتيجة = قسمة(10، 0)
    } امسك ValueError كـ خ: {
        اطبع("خطأ:", str(خ))
    }
}
```

---

> **ملاحظة**: للمزيد من التفاصيل، راجع [ADVANCED_FEATURES_2025.md](../../ADVANCED_FEATURES_2025.md)

> التنقل السريع: [PART1](02_PROCEDURAL_OOP_AR_PART1.md) | [PART2](02_PROCEDURAL_OOP_AR_PART2.md) | [PART3](02_PROCEDURAL_OOP_AR_PART3.md) | [PART4](02_PROCEDURAL_OOP_AR_PART4.md)

</div>
