# ربط مخطط النموذج اللغوي التصوّري بإمكانات بيان القائمة

يربط هذا المستند بين:

- **مخطط الطبقات**: `CONCEPTUAL_LM_BLUEPRINT.md`
- **تنسيق الأثر التصوّري**: `CONCEPTUAL_TRACE_FORMAT.md`
- **إمكانات بيان القائمة**:
  - النموذج الوجودي ونظام الكيانات
  - النموذج المعرفي–الدلالي
  - الشبكات الدلالية والسببية
  - المنطق الهجين، الاحتمال والتشكيك

الهدف أن يعرف المبرمج **من أين تأتي بيانات الأثر التصوّري، وكيف تغتني بالشبكات السببية والاحتمال**، دون تقييد بالأمثلة النهائية.

---

## 1. خريطة المكوّنات: من بيان إلى Conceptual Trace

### 1.1 الكيانات (entities)

- مصدر المعلومات:
  - تعريفات `مجال`، `بيئة`، `كائن_وجودي` في:
    - `EXISTENTIAL_MODEL_GUIDE.md`
    - `ENHANCED_EXISTENTIAL_MODEL.md`
  - تعريفات `كيان` في:
    - `ENTITY_SYSTEM_GUIDE.md`
- في الأثر التصوّري (`CONCEPTUAL_TRACE_FORMAT.md`):
  - تعبّأ قائمة `entities` من:
    - الكيانات المعرَّفة في المجال/البيئة
    - الكيانات المعرفية (إن استخدمت) من `COGNITIVE_SEMANTIC_GUIDE.md`

### 1.2 الحالات والخصائص (states)

- مصدر المعلومات:
  - نظام الكيانات: حالات وخصائص
    - قيم ضبابية [0..1]
    - قيم عددية/محدَّدة المجال
  - حقائق منطقية من المحرك:
    - `state/3`, `property/3`
- في الأثر التصوّري:
  - تعبّأ قائمة `states` من هذه الحقائق مع إضافة:
    - `time` (قبل/بعد/أثناء أو مؤشر زمني)
    - `certainty` (مستفاد من درجة الحالة أو من طبقة منطقية احتمالية أعْلى)

### 1.3 الأحداث (events)

- مصدر المعلومات:
  - تطبيق الأفعال في نظام الكيانات (`كيان` + `أفعال` + `طبق/نفّذ`)
  - أحداث معرفية من `COGNITIVE_SEMANTIC_GUIDE.md` (`حدث_معرفي`)
  - حقائق محرك الكيانات:
    - `event/4` وسجل الأحداث
- في الأثر التصوّري:
  - تعبّأ قائمة `events` من هذه السجلات مع حقول:
    - `action`, `actors`, `targets`, `domain`, `environment`, `time`
    - `intensity` يمكن ربطها بقوة الفعل أو درجة تأثيره
    - `probability` يمكن ربطها بطبقة الاحتمال/التشكيك (انظر §3)

### 1.4 التحوّلات (transforms)

- مصدر المعلومات:
  - نظام الكيانات:
    - نتائج تطبيق الأفعال
    - حقائق `changed/4` (من–إلى)
  - معادلات وأضداد:
    - تعريفات في `ENTITY_SYSTEM_GUIDE.md` و `CONSTRAINTS_GUIDE.md`
- في الأثر التصوّري:
  - تعبّأ قائمة `transforms` من:
    - الربط بين `event_id` و `state_changes`
    - ذكر `law` عندما يكون التحوّل ناتجًا عن معادلة/قانون معيّن

### 1.5 الأفكار (ideas)

- مصدر المعلومات:
  - `COGNITIVE_SEMANTIC_GUIDE.md`:
    - `فكرة`، `كيان_معرفي`، `حدث_معرفي`، أنماط لغوية/تصورية.
- في الأثر التصوّري:
  - يمكن تمثيل كل فكرة كمدخلة في `ideas` تربط:
    - مجموعة كيانات + حدث/أحداث + تحوّلات معينة.

### 1.6 البيانات الوصفية (meta)

- مصدر المعلومات:
  - إعدادات المجال والبيئة
  - مصدر الاستدلال (قواعد منطقية، شبكات سببية، تعلّم آلي، إدخال بشري، ...)
  - طبقات المنطق الهجين/الاحتمالي (ثقة، احتمالات)
- في الأثر التصوّري:
  - تعبّأ حقول مثل: `source`, `confidence`, `time_frame`, `narrative_perspective`.

---

## 2. إدخال الشبكات الدلالية والسببية

### 2.1 الشبكات الدلالية

- التوثيق ذو الصلة:
  - `COGNITIVE_SEMANTIC_GUIDE.md`
  - `SEMANTIC_PROGRAMMING_GUIDE.md`
- الاستعمال في الأثر التصوّري:
  - يمكن ربط الكيانات والخصائص والعلاقات في trace بعُقد وروابط في شبكة معاني:
    - روابط تضاد، ترادف، استعارة، رمزية...
  - هذا الربط لا يغيّر بنية `entities` و `events` و `states`، بل يضيف طبقة استعلام:
    - اختيار تعابير لغوية بديلة
    - إدارة الاستعارات والرموز

### 2.2 الشبكات السببية

- التوثيق ذو الصلة (أسماء تقريبية اعتمادًا على التوثيق الحالي):
  - `SEMANTIC_PROGRAMMING_GUIDE.md` (العلاقات السببية)
  - `REACTIVE_GUIDE.md` (التفاعلات، القواعد الشرطية الزمنية)
- الاستعمال في الأثر التصوّري:
  - يمكن النظر إلى `events` + `transforms` كـ **بيانات خام** لشبكة سببية:
    - كل حدث مع تحوّلاته مرشح لعلاقة "سبب → نتيجة".
  - يُقترَح أن يضاف فوق trace هيكل مفاهيمي (غير ملزم تنفيذيًا):
    - قائمة روابط سببية (داخلية للأثر):
      - `cause_event_id`، `effect_event_id`، `strength`، `justification`.
    - أو ربط مباشر بين حدث وتحول معين (حدث سبب تغيير حالة محددة).
  - هذه الشبكات السببية تصبح لاحقًا مصدرًا لغويًا لتوليد:
    - الروابط: "لأن"، "لذلك"، "بسبب"، "نتيجةً لـ"...


### 2.3 المتشابهات والمتقاربات والمترادفات (similarity)

- التوثيق ذو الصلة:
  - `similarity_tutorial_ar.md`
  - وحدة `bayan.core.similarity` (حقائق `similar/5`، قواعد `close/3`, `close/4`, `synonym/3`, `sim_threshold/2`)
- الاستعمال في الأثر التصوّري:
  - المترادفات والمتقاربات تعرّف شبكة تشابه بين رؤوس عامة (Heads) وألفاظ أخرى بدرجات.
  - هذه الشبكة يمكن النظر إليها كجزء من الشبكات الدلالية، لكنها تركز على علاقة "قرب في المعنى".
  - لا نضيف حقلًا جديدًا إلى trace؛ بل:
    - ترتبط المعرّفات المفاهيمية للكيانات/الخصائص/الأفعال بعُقد في شبكة التشابه.
    - يمكن للطبقة اللغوية أن تستعلم بـ `close/3` أو `close/4` لاختيار لفظ مناسب (أو بديل) لمفهوم معيّن حسب العتبة/النوع (syn, alias, approx_eq...).
- على مستوى التصميم (بدون أمثلة نهائية):
  - يمكن تعريف مجموعات مترادفة لأدوار مفاهيمية عامة (مثل نوع كيان أو دور حدث) عبر `sim.synset`.
  - يمكن تعريف علاقات `alias` أو `approx_eq` بين مفاهيم من مجالات مختلفة؛ تُستخدم لاحقًا عند الترجمة بين الأطر أو عند توليد صيغ مكافئة لغويًا.

---

## 3. الاحتمال والتشكيك في الأثر التصوّري

بيان تدعم **الاحتمال والتشكيك** عبر أكثر من مستوى (حسب ما توضّحه أدلة المنطق والبرمجة الدلالية والمنطق الهجين):

1. **على مستوى الحالات والخصائص**:
   - القيم [0..1] في `states.value` يمكن أن تُفسّر كدرجات:
     - شدّة (قوة صفة)
     - أو احتمال/درجة يقين بوجود تلك الصفة.
2. **على مستوى الأحداث**:
   - الحقل `probability` في كل حدث يعبّر عن:
     - احتمال وقوع الحدث
     - أو درجة الثقة في استنتاجه من قواعد/شبكات.
3. **على مستوى meta للأثر كله**:
   - الحقل `confidence` يلخّص الثقة في كامل المشهد أو السيناريو.
4. **على مستوى الشبكات السببية والدلالية**:
   - يمكن أن تحمل الروابط في الشبكة درجات قوة/ثقة.

هذه الدرجات ترتبط بما تقدّمه أدلة:

- `03_LOGIC_PROGRAMMING_AR*.md` (المنطق، الحقائق والقواعد)
- `hybrid_logic_advanced.md` (إن وجدت في المشروع، للمنطق الهجين والاحتمالي)
- `SEMANTIC_PROGRAMMING_GUIDE.md` (التقييد الدلالي، احتمال المعاني)

لا يفرض هذا المستند نوعًا واحدًا للتفسير (شدّة أم احتمال)، بل يوضّح **أماكن وجود الأرقام** التي يمكن أن تُستخدم لاحقًا لبناء سياسة تفسير موحّدة.

---

## 4. كيف تستفيد طبقة اللغة والتوليد من هذه الإمكانات؟

من منظور الطبقة اللغوية (كما في `GENERATION_GUIDE_AR.md` و `ai/nlp`):

- **الشبكات السببية**:
  - تستخدم لاختيار تعابير سببية، وترتيب الأحداث في السرد بحسب علاقات السبب/النتيجة.
- **الاحتمال والتشكيك**:
  - تستخدم لاختيار لغة يقين/تردّد مناسبة:
    - تعابير مثل: "ربما"، "غالبًا"، "يبدو أن"، "من غير المؤكّد"...
- **القيم [0..1] على محاور الأضداد**:
  - تغذّي اختيار الصفات والتدرّج (ضعيف/متوسط/قوي) في التعبير اللفظي.

المبدأ المهم: **طبقة اللغة لا تعيد اختراع العالم**، بل تقرأ من الأثر التصوّري + الشبكات السببية/الدلالية + درجات الاحتمال، ثم تختار التعبير الأنسب وفقًا لقواعد عامة يعرّفها المبرمج لاحقًا.

---

## 5. ما الذي يحتاج إلى توسعة مستقبلية؟

1. **تعريف رسمي لنوع "رابطة سببية" فوق trace**:
   - نوع/مكتبة تضيف إلى الأثر التصوّري بنية `causal_links` واضحة.
2. **سياسة موحّدة لتفسير [0..1]**:
   - هل تُفسَّر كاحتمال، أم شدّة، أم مزيج، وكيف ينعكس ذلك لغويًا؟
3. **ربط أوضح مع أدلة المنطق الهجين**:
   - تحديد أسماء البنى/المكتبات الفعلية التي تمثّل قواعد احتمالية أو افتراضات مع تشكيك.
4. **قوالب لغوية خاصة بالتشكيك والسببية**:
   - على مستوى blueprint: تحديد متغيرات عامة لقوالب من نوع:
     - "بسبب {سبب} حدث {نتيجة}"
     - "يُحتمل أن {حدث} بدرجة {p}".

هذا المستند لا يضيف سيناريوهات ملموسة، بل يوضّح **خريطة الربط** بين ما هو موجود في بيان اليوم وبين الطبقة التصورية واللغوية المقترحتين، مع التأكيد على إدخال الشبكات السببية والاحتمال والتشكيك كجزء أساسي من التصميم.

