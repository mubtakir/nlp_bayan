<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø¹Ø§Ø¬Ù… Ø§Ù„Ù„ØºÙˆÙŠØ© - Ø¨ØµÙŠØ±Ø© AI</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            padding: 20px;
            direction: rtl;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }

        .panel-title {
            font-size: 1.5em;
            color: #667eea;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            color: #333;
            font-weight: bold;
        }

        .input-group input,
        .input-group textarea,
        .input-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .input-group input:focus,
        .input-group textarea:focus,
        .input-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .input-group textarea {
            resize: vertical;
            min-height: 100px;
            font-family: inherit;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(240, 147, 251, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(79, 172, 254, 0.4);
        }

        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .results-container {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 15px;
        }

        .result-item {
            background: #f8f9fa;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-right: 4px solid #667eea;
        }

        .result-item h4 {
            color: #667eea;
            margin-bottom: 5px;
        }

        .result-item p {
            color: #666;
            margin: 5px 0;
        }

        .character-analysis {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .character-analysis h3 {
            font-size: 3em;
            text-align: center;
            margin-bottom: 10px;
        }

        .meaning-list {
            list-style: none;
        }

        .meaning-list li {
            background: rgba(255,255,255,0.2);
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 5px;
        }

        .confidence-bar {
            width: 100%;
            height: 20px;
            background: rgba(255,255,255,0.3);
            border-radius: 10px;
            overflow: hidden;
            margin-top: 10px;
        }

        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
            transition: width 0.5s;
        }

        .log-container {
            background: #1e1e1e;
            color: #00ff00;
            padding: 15px;
            border-radius: 8px;
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .log-entry {
            margin-bottom: 5px;
        }

        .log-entry.info {
            color: #00ff00;
        }

        .log-entry.success {
            color: #00ffff;
        }

        .log-entry.warning {
            color: #ffff00;
        }

        .log-entry.error {
            color: #ff0000;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ï¿½ï¿½ Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø¹Ø§Ø¬Ù… Ø§Ù„Ù„ØºÙˆÙŠØ©</h1>
            <p>Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù…Ø¹Ø§Ù†ÙŠ Ø§Ù„Ø­Ø±ÙˆÙ Ù…Ù† Ø§Ù„Ù…Ø¹Ø§Ø¬Ù… - Ù†Ø¸Ø§Ù… Ø¨ØµÙŠØ±Ø© AI Ø§Ù„Ø«ÙˆØ±ÙŠ</p>
        </div>

        <div class="main-grid">
            <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ø¹Ø¬Ù… -->
            <div class="panel">
                <h2 class="panel-title">ğŸ” Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ø¹Ø¬Ù…</h2>
                
                <div class="input-group">
                    <label>Ø§Ù„ÙƒÙ„Ù…Ø©:</label>
                    <input type="text" id="searchWord" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„ÙƒÙ„Ù…Ø© Ù„Ù„Ø¨Ø­Ø« Ø¹Ù†Ù‡Ø§">
                </div>

                <div class="input-group">
                    <label>Ù†ÙˆØ¹ Ø§Ù„Ø¨Ø­Ø«:</label>
                    <select id="searchType">
                        <option value="exact">Ù…Ø·Ø§Ø¨Ù‚ ØªÙ…Ø§Ù…Ø§Ù‹</option>
                        <option value="contains" selected>ÙŠØ­ØªÙˆÙŠ</option>
                        <option value="starts">ÙŠØ¨Ø¯Ø£ Ø¨Ù€</option>
                        <option value="ends">ÙŠÙ†ØªÙ‡ÙŠ Ø¨Ù€</option>
                    </select>
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" onclick="searchWord()">Ø¨Ø­Ø«</button>
                    <button class="btn btn-secondary" onclick="clearSearch()">Ù…Ø³Ø­</button>
                </div>

                <div class="results-container" id="searchResults"></div>
            </div>

            <!-- Ù„ÙˆØ­Ø© ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø­Ø±ÙˆÙ -->
            <div class="panel">
                <h2 class="panel-title">ğŸ”¤ ØªØ­Ù„ÙŠÙ„ Ù…Ø¹Ø§Ù†ÙŠ Ø§Ù„Ø­Ø±ÙˆÙ</h2>
                
                <div class="input-group">
                    <label>Ø§Ù„Ø­Ø±Ù:</label>
                    <input type="text" id="characterInput" maxlength="1" placeholder="Ø£Ø¯Ø®Ù„ Ø­Ø±ÙØ§Ù‹ ÙˆØ§Ø­Ø¯Ø§Ù‹">
                </div>

                <div class="input-group">
                    <label>Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„ØªÙƒØ±Ø§Ø±:</label>
                    <input type="number" id="minFrequency" value="0.1" min="0" max="1" step="0.1">
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" onclick="analyzeCharacter()">ØªØ­Ù„ÙŠÙ„</button>
                    <button class="btn btn-success" onclick="extractAllCharacters()">Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„ÙƒÙ„</button>
                </div>

                <div id="characterAnalysisResult"></div>
            </div>

            <!-- Ù„ÙˆØ­Ø© Ø¥Ø¶Ø§ÙØ© ÙƒÙ„Ù…Ø§Øª -->
            <div class="panel">
                <h2 class="panel-title">â• Ø¥Ø¶Ø§ÙØ© ÙƒÙ„Ù…Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©</h2>
                
                <div class="input-group">
                    <label>Ø§Ù„ÙƒÙ„Ù…Ø©:</label>
                    <input type="text" id="newWord" placeholder="Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©">
                </div>

                <div class="input-group">
                    <label>Ø§Ù„Ù…Ø¹Ù†Ù‰:</label>
                    <textarea id="newMeaning" placeholder="Ù…Ø¹Ù†Ù‰ Ø§Ù„ÙƒÙ„Ù…Ø©"></textarea>
                </div>

                <div class="input-group">
                    <label>Ø§Ù„Ø¬Ø°Ø± (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):</label>
                    <input type="text" id="newRoot" placeholder="Ø§Ù„Ø¬Ø°Ø± Ø§Ù„Ù„ØºÙˆÙŠ">
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" onclick="addWord()">Ø¥Ø¶Ø§ÙØ©</button>
                    <button class="btn btn-secondary" onclick="clearAddForm()">Ù…Ø³Ø­</button>
                </div>
            </div>

            <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
            <div class="panel">
                <h2 class="panel-title">ğŸ“Š Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</h2>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="statTotalWords">0</div>
                        <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„Ù…Ø§Øª</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="statTotalChars">0</div>
                        <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø±ÙˆÙ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="statAvgLength">0</div>
                        <div class="stat-label">Ù…ØªÙˆØ³Ø· Ø§Ù„Ø·ÙˆÙ„</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="statCacheHit">0%</div>
                        <div class="stat-label">Ù…Ø¹Ø¯Ù„ Ø§Ù„ÙƒØ§Ø´</div>
                    </div>
                </div>

                <div class="button-group" style="margin-top: 20px;">
                    <button class="btn btn-success" onclick="updateStatistics()">ØªØ­Ø¯ÙŠØ«</button>
                    <button class="btn btn-secondary" onclick="exportData()">ØªØµØ¯ÙŠØ±</button>
                </div>
            </div>

            <!-- Ø³Ø¬Ù„ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« -->
            <div class="panel full-width">
                <h2 class="panel-title">ğŸ“‹ Ø³Ø¬Ù„ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«</h2>
                <div class="log-container" id="logContainer"></div>
            </div>
        </div>
    </div>

    <script>
        // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙˆÙ‡Ù…ÙŠØ© Ù„Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙˆØ¶ÙŠØ­ÙŠ
        let lexiconData = {
            'ÙƒØªØ¨': 'Ø³Ø¬Ù„ Ø§Ù„Ø£ÙÙƒØ§Ø± ÙˆØ§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª',
            'ÙƒØªØ§Ø¨': 'Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…Ù† Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ù…Ø·Ø¨ÙˆØ¹Ø©',
            'Ù…ÙƒØªØ¨': 'Ù…ÙƒØ§Ù† Ù„Ù„Ø¹Ù…Ù„ ÙˆØ§Ù„Ø¯Ø±Ø§Ø³Ø©',
            'Ù…ÙƒØªØ¨Ø©': 'Ù…ÙƒØ§Ù† Ù„Ø­ÙØ¸ Ø§Ù„ÙƒØªØ¨',
            'ÙƒØ§ØªØ¨': 'Ù…Ù† ÙŠÙƒØªØ¨',
            'Ø¹Ù„Ù…': 'Ø§Ù„Ù…Ø¹Ø±ÙØ© ÙˆØ§Ù„Ø¥Ø¯Ø±Ø§Ùƒ',
            'Ø¹Ø§Ù„Ù…': 'Ù…Ù† ÙŠØ¹Ù„Ù…',
            'Ù…Ø¹Ù„Ù…': 'Ù…Ù† ÙŠØ¹Ù„Ù‘Ù…',
            'ØªØ¹Ù„ÙŠÙ…': 'Ù†Ù‚Ù„ Ø§Ù„Ù…Ø¹Ø±ÙØ©',
            'Ø­ÙƒÙ…Ø©': 'Ø§Ù„Ø¹Ù‚Ù„ ÙˆØ§Ù„ØªØ¯Ø¨ÙŠØ±',
            'Ø­ÙƒÙŠÙ…': 'ØµØ§Ø­Ø¨ Ø§Ù„Ø­ÙƒÙ…Ø©',
            'Ø­Ø§ÙƒÙ…': 'Ù…Ù† ÙŠØ­ÙƒÙ…',
            'Ù…Ø­ÙƒÙ…Ø©': 'Ù…ÙƒØ§Ù† Ø§Ù„Ø­ÙƒÙ…'
        };

        let characterAnalyses = {};
        let statistics = {
            totalWords: Object.keys(lexiconData).length,
            totalChars: 0,
            avgLength: 0,
            cacheHit: 0
        };

        // ØªÙ‡ÙŠØ¦Ø©
        function initialize() {
            updateStatistics();
            logMessage('ØªÙ… ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ÙƒÙ„Ù…Ø©
        function searchWord() {
            let word = document.getElementById('searchWord').value.trim();
            let searchType = document.getElementById('searchType').value;
            
            if (!word) {
                logMessage('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ù„Ù„Ø¨Ø­Ø«', 'warning');
                return;
            }

            let results = [];
            
            for (let key in lexiconData) {
                let match = false;
                
                switch(searchType) {
                    case 'exact':
                        match = key === word;
                        break;
                    case 'contains':
                        match = key.includes(word);
                        break;
                    case 'starts':
                        match = key.startsWith(word);
                        break;
                    case 'ends':
                        match = key.endsWith(word);
                        break;
                }
                
                if (match) {
                    results.push({ word: key, meaning: lexiconData[key] });
                }
            }

            displaySearchResults(results);
            logMessage(`ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ${results.length} Ù†ØªÙŠØ¬Ø©`, 'info');
        }

        // Ø¹Ø±Ø¶ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø«
        function displaySearchResults(results) {
            let container = document.getElementById('searchResults');
            
            if (results.length === 0) {
                container.innerHTML = '<p style="text-align:center; color:#999; padding:20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬</p>';
                return;
            }

            let html = '';
            for (let r of results) {
                html += `
                    <div class="result-item">
                        <h4>${r.word}</h4>
                        <p>${r.meaning}</p>
                    </div>
                `;
            }
            
            container.innerHTML = html;
        }

        // ØªØ­Ù„ÙŠÙ„ Ø­Ø±Ù
        function analyzeCharacter() {
            let char = document.getElementById('characterInput').value.trim();
            let minFreq = parseFloat(document.getElementById('minFrequency').value);
            
            if (!char) {
                logMessage('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø­Ø±Ù Ù„Ù„ØªØ­Ù„ÙŠÙ„', 'warning');
                return;
            }

            // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„ØªÙŠ ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø±Ù
            let words = [];
            for (let word in lexiconData) {
                if (word.includes(char)) {
                    words.push(word);
                }
            }

            if (words.length === 0) {
                logMessage(`Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒÙ„Ù…Ø§Øª ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø±Ù "${char}"`, 'warning');
                return;
            }

            // ØªØ­Ù„ÙŠÙ„ Ø¨Ø³ÙŠØ· Ù„Ù„Ù…Ø¹Ø§Ù†ÙŠ
            let meanings = [];
            for (let word of words) {
                let meaning = lexiconData[word];
                let keywords = meaning.split(/\s+/).filter(w => w.length > 2);
                meanings.push(...keywords);
            }

            // Ø­Ø³Ø§Ø¨ Ø§Ù„ØªÙƒØ±Ø§Ø±
            let freq = {};
            for (let m of meanings) {
                freq[m] = (freq[m] || 0) + 1;
            }

            // ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„ØªÙƒØ±Ø§Ø±
            let sorted = Object.entries(freq)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 5);

            let confidence = Math.min(words.length / 10, 1.0);

            let analysis = {
                character: char,
                totalWords: words.length,
                topMeanings: sorted,
                confidence: confidence,
                words: words.slice(0, 10)
            };

            characterAnalyses[char] = analysis;
            displayCharacterAnalysis(analysis);
            logMessage(`ØªÙ… ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø­Ø±Ù "${char}" Ø¨Ù†Ø¬Ø§Ø­`, 'success');
        }

        // Ø¹Ø±Ø¶ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø­Ø±Ù
        function displayCharacterAnalysis(analysis) {
            let container = document.getElementById('characterAnalysisResult');
            
            let html = `
                <div class="character-analysis">
                    <h3>${analysis.character}</h3>
                    <p><strong>Ø¹Ø¯Ø¯ Ø§Ù„ÙƒÙ„Ù…Ø§Øª:</strong> ${analysis.totalWords}</p>
                    <p><strong>Ø§Ù„Ø«Ù‚Ø©:</strong> ${(analysis.confidence * 100).toFixed(1)}%</p>
                    <div class="confidence-bar">
                        <div class="confidence-fill" style="width: ${analysis.confidence * 100}%"></div>
                    </div>
                    
                    <h4 style="margin-top: 15px;">Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ø¹Ø§Ù†ÙŠ:</h4>
                    <ul class="meaning-list">
            `;
            
            for (let [meaning, count] of analysis.topMeanings) {
                html += `<li>${meaning} (${count})</li>`;
            }
            
            html += `
                    </ul>
                    
                    <h4 style="margin-top: 15px;">Ø£Ù…Ø«Ù„Ø© Ø§Ù„ÙƒÙ„Ù…Ø§Øª:</h4>
                    <p>${analysis.words.join('ØŒ ')}</p>
                </div>
            `;
            
            container.innerHTML = html;
        }

        // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø±ÙˆÙ
        function extractAllCharacters() {
            logMessage('Ø¨Ø¯Ø¡ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù…Ø¹Ø§Ù†ÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø±ÙˆÙ...', 'info');
            
            let chars = new Set();
            for (let word in lexiconData) {
                for (let char of word) {
                    chars.add(char);
                }
            }

            let count = 0;
            for (let char of chars) {
                document.getElementById('characterInput').value = char;
                analyzeCharacter();
                count++;
            }

            statistics.totalChars = count;
            updateStatistics();
            logMessage(`ØªÙ… Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù…Ø¹Ø§Ù†ÙŠ ${count} Ø­Ø±Ù`, 'success');
        }

        // Ø¥Ø¶Ø§ÙØ© ÙƒÙ„Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©
        function addWord() {
            let word = document.getElementById('newWord').value.trim();
            let meaning = document.getElementById('newMeaning').value.trim();
            
            if (!word || !meaning) {
                logMessage('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ÙƒÙ„Ù…Ø© ÙˆØ§Ù„Ù…Ø¹Ù†Ù‰', 'warning');
                return;
            }

            if (lexiconData[word]) {
                logMessage(`Ø§Ù„ÙƒÙ„Ù…Ø© "${word}" Ù…ÙˆØ¬ÙˆØ¯Ø© Ø¨Ø§Ù„ÙØ¹Ù„`, 'warning');
                return;
            }

            lexiconData[word] = meaning;
            statistics.totalWords++;
            updateStatistics();
            clearAddForm();
            logMessage(`ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒÙ„Ù…Ø© "${word}" Ø¨Ù†Ø¬Ø§Ø­`, 'success');
        }

        // Ù…Ø³Ø­ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¥Ø¶Ø§ÙØ©
        function clearAddForm() {
            document.getElementById('newWord').value = '';
            document.getElementById('newMeaning').value = '';
            document.getElementById('newRoot').value = '';
        }

        // Ù…Ø³Ø­ Ø§Ù„Ø¨Ø­Ø«
        function clearSearch() {
            document.getElementById('searchWord').value = '';
            document.getElementById('searchResults').innerHTML = '';
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        function updateStatistics() {
            let totalLength = 0;
            for (let word in lexiconData) {
                totalLength += word.length;
            }
            
            statistics.avgLength = statistics.totalWords > 0 
                ? (totalLength / statistics.totalWords).toFixed(2) 
                : 0;
            
            statistics.cacheHit = Math.floor(Math.random() * 100); // Ù…Ø­Ø§ÙƒØ§Ø©

            document.getElementById('statTotalWords').textContent = statistics.totalWords;
            document.getElementById('statTotalChars').textContent = statistics.totalChars;
            document.getElementById('statAvgLength').textContent = statistics.avgLength;
            document.getElementById('statCacheHit').textContent = statistics.cacheHit + '%';
            
            logMessage('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª', 'info');
        }

        // ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function exportData() {
            let data = {
                lexicon: lexiconData,
                characterAnalyses: characterAnalyses,
                statistics: statistics
            };
            
            let json = JSON.stringify(data, null, 2);
            let blob = new Blob([json], { type: 'application/json' });
            let url = URL.createObjectURL(blob);
            let a = document.createElement('a');
            a.href = url;
            a.download = 'lexicon_export.json';
            a.click();
            
            logMessage('ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ø³Ø¬Ù„
        function logMessage(message, type = 'info') {
            let container = document.getElementById('logContainer');
            let timestamp = new Date().toLocaleTimeString('ar-SA');
            let entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            entry.textContent = `[${timestamp}] ${message}`;
            container.appendChild(entry);
            container.scrollTop = container.scrollHeight;
        }

        // ØªÙ‡ÙŠØ¦Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
        window.onload = initialize;
    </script>
</body>
</html>
