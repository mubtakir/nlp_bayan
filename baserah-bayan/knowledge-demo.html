<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø¹Ø±ÙØ© - Ø¨ØµÙŠØ±Ø© AI</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            direction: rtl;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
            text-align: center;
        }

        .header h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 1.1em;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .panel {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .panel h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.5em;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #333;
            font-weight: bold;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .btn-success {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .btn-danger {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-card .number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-card .label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .results-container {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 15px;
        }

        .result-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-right: 4px solid #667eea;
        }

        .result-item h3 {
            color: #667eea;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .result-item .meta {
            display: flex;
            gap: 15px;
            margin-bottom: 8px;
            font-size: 0.9em;
            color: #666;
        }

        .result-item .snippet {
            color: #444;
            line-height: 1.6;
        }

        .result-item .relevance {
            background: #667eea;
            color: white;
            padding: 3px 10px;
            border-radius: 5px;
            font-size: 0.85em;
            display: inline-block;
            margin-top: 8px;
        }

        .knowledge-item {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            border-right: 3px solid #764ba2;
        }

        .knowledge-item .title {
            font-weight: bold;
            color: #764ba2;
            margin-bottom: 5px;
        }

        .knowledge-item .content {
            color: #555;
            font-size: 0.9em;
        }

        .knowledge-item .tags {
            margin-top: 5px;
        }

        .tag {
            background: #667eea;
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.75em;
            margin-left: 5px;
            display: inline-block;
        }

        .file-upload {
            border: 2px dashed #667eea;
            padding: 30px;
            text-align: center;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .file-upload:hover {
            background-color: #f8f9fa;
        }

        .file-upload input[type="file"] {
            display: none;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>ğŸ§ ğŸ“š Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø¹Ø±ÙØ© - Ø¨ØµÙŠØ±Ø© AI</h1>
            <p>Ù†Ø¸Ø§Ù… Ø´Ø§Ù…Ù„ Ù„ØªØºØ°ÙŠØ© ÙˆØ§Ø³ØªØ¹Ù„Ø§Ù… ÙˆØ¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¹Ø±ÙØ©</p>
        </div>

        <!-- Statistics -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="number" id="totalItems">0</div>
                <div class="label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù†Ø§ØµØ±</div>
            </div>
            <div class="stat-card">
                <div class="number" id="totalRelations">0</div>
                <div class="label">Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª</div>
            </div>
            <div class="stat-card">
                <div class="number" id="totalQueries">0</div>
                <div class="label">Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª</div>
            </div>
            <div class="stat-card">
                <div class="number" id="totalClusters">0</div>
                <div class="label">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª</div>
            </div>
        </div>

        <!-- Main Grid -->
        <div class="main-grid">
            <!-- Feed Knowledge Panel -->
            <div class="panel">
                <h2>ğŸ“¥ ØªØºØ°ÙŠØ© Ø§Ù„Ù…Ø¹Ø±ÙØ©</h2>
                
                <div class="form-group">
                    <label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</label>
                    <input type="text" id="feedTitle" placeholder="Ø£Ø¯Ø®Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø¹Ø±ÙØ©">
                </div>
                
                <div class="form-group">
                    <label>Ø§Ù„Ù…Ø­ØªÙˆÙ‰:</label>
                    <textarea id="feedContent" placeholder="Ø£Ø¯Ø®Ù„ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø¹Ø±ÙØ©"></textarea>
                </div>
                
                <div class="form-group">
                    <label>Ø§Ù„ÙØ¦Ø©:</label>
                    <select id="feedCategory">
                        <option value="general">Ø¹Ø§Ù…</option>
                        <option value="mathematical">Ø±ÙŠØ§Ø¶ÙŠØ§Øª</option>
                        <option value="scientific">Ø¹Ù„ÙˆÙ…</option>
                        <option value="linguistic">Ù„ØºÙˆÙŠØ§Øª</option>
                        <option value="historical">ØªØ§Ø±ÙŠØ®</option>
                        <option value="technical">ØªÙ‚Ù†ÙŠØ©</option>
                        <option value="philosophical">ÙÙ„Ø³ÙØ©</option>
                        <option value="cultural">Ø«Ù‚Ø§ÙØ©</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Ø§Ù„Ù…Ø³ØªÙˆÙ‰:</label>
                    <select id="feedLevel">
                        <option value="basic">Ø£Ø³Ø§Ø³ÙŠ</option>
                        <option value="intermediate">Ù…ØªÙˆØ³Ø·</option>
                        <option value="advanced">Ù…ØªÙ‚Ø¯Ù…</option>
                        <option value="expert">Ø®Ø¨ÙŠØ±</option>
                    </select>
                </div>
                
                <button class="btn" onclick="feedKnowledge()">â• Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø±ÙØ©</button>
                <button class="btn btn-secondary" onclick="feedSampleData()">ğŸ“š Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©</button>
            </div>

            <!-- Search Panel -->
            <div class="panel">
                <h2>ğŸ” Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…</h2>
                
                <div class="form-group">
                    <label>Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø§Ù„Ø¨Ø­Ø«:</label>
                    <input type="text" id="searchQuery" placeholder="Ø§Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ø¹Ø±ÙØ©...">
                </div>
                
                <div class="form-group">
                    <label>Ù†ÙˆØ¹ Ø§Ù„Ø¨Ø­Ø«:</label>
                    <select id="searchType">
                        <option value="simple">Ø¨Ø­Ø« Ø¨Ø³ÙŠØ·</option>
                        <option value="semantic">Ø¨Ø­Ø« Ø¯Ù„Ø§Ù„ÙŠ</option>
                        <option value="advanced">Ø¨Ø­Ø« Ù…ØªÙ‚Ø¯Ù…</option>
                        <option value="fuzzy">Ø¨Ø­Ø« ØºØ§Ù…Ø¶</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Ø¹Ø¯Ø¯ Ø§Ù„Ù†ØªØ§Ø¦Ø¬:</label>
                    <input type="number" id="maxResults" value="10" min="1" max="50">
                </div>
                
                <button class="btn btn-success" onclick="performSearch()">ğŸ” Ø¨Ø­Ø«</button>
                <button class="btn btn-secondary" onclick="searchByCategory()">ğŸ·ï¸ Ø¨Ø­Ø« Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø©</button>
            </div>
        </div>

        <!-- Search Results -->
        <div class="panel full-width">
            <h2>ğŸ“Š Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø«</h2>
            <div id="searchResults" class="results-container">
                <p style="text-align: center; color: #999; padding: 40px;">
                    Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ø¨Ø¹Ø¯. Ù‚Ù… Ø¨Ø¥Ø¬Ø±Ø§Ø¡ Ø¨Ø­Ø« Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬.
                </p>
            </div>
        </div>

        <!-- Knowledge Base -->
        <div class="panel full-width">
            <h2>ğŸ“š Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ù…Ø¹Ø±ÙØ© (Ø¢Ø®Ø± 10 Ø¹Ù†Ø§ØµØ±)</h2>
            <div id="knowledgeBase" class="results-container">
                <p style="text-align: center; color: #999; padding: 40px;">
                    Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ± Ù…Ø¹Ø±ÙÙŠØ© Ø¨Ø¹Ø¯. Ù‚Ù… Ø¨Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø±ÙØ© Ø¬Ø¯ÙŠØ¯Ø©.
                </p>
            </div>
            <button class="btn btn-danger" onclick="clearAll()">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>
            <button class="btn btn-secondary" onclick="exportKnowledge()">ğŸ’¾ ØªØµØ¯ÙŠØ±</button>
        </div>
    </div>

    <script type="module">
        // Import the knowledge system (ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ)
        // import { IntegratedKnowledgeSystem } from './knowledge-integration.bn';
        
        // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ù„Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙˆØ¶ÙŠØ­ÙŠ
        let knowledgeSystem = {
            items: [],
            relations: [],
            queries: 0,
            clusters: 0
        };

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        function updateStatistics() {
            document.getElementById('totalItems').textContent = knowledgeSystem.items.length;
            document.getElementById('totalRelations').textContent = knowledgeSystem.relations.length;
            document.getElementById('totalQueries').textContent = knowledgeSystem.queries;
            document.getElementById('totalClusters').textContent = knowledgeSystem.clusters;
        }

        // Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø±ÙØ©
        window.feedKnowledge = function() {
            let title = document.getElementById('feedTitle').value;
            let content = document.getElementById('feedContent').value;
            let category = document.getElementById('feedCategory').value;
            let level = document.getElementById('feedLevel').value;

            if (!title || !content) {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ù„Ù…Ø­ØªÙˆÙ‰');
                return;
            }

            let item = {
                id: Date.now(),
                title: title,
                content: content,
                category: category,
                level: level,
                tags: extractTags(content),
                timestamp: new Date()
            };

            knowledgeSystem.items.push(item);

            // Ù…Ø³Ø­ Ø§Ù„Ø­Ù‚ÙˆÙ„
            document.getElementById('feedTitle').value = '';
            document.getElementById('feedContent').value = '';

            updateStatistics();
            displayKnowledgeBase();

            alert('âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¹Ø±ÙØ© Ø¨Ù†Ø¬Ø§Ø­!');
        };

        // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª
        function extractTags(content) {
            let tags = [];
            if (content.includes('Ù…Ø¹Ø§Ø¯Ù„Ø©') || content.includes('Ø­Ø³Ø§Ø¨')) tags.push('Ø±ÙŠØ§Ø¶ÙŠØ§Øª');
            if (content.includes('ØªØ¬Ø±Ø¨Ø©') || content.includes('Ù‚Ø§Ù†ÙˆÙ†')) tags.push('Ø¹Ù„ÙˆÙ…');
            if (content.includes('Ø¨Ø±Ù…Ø¬Ø©') || content.includes('Ù†Ø¸Ø§Ù…')) tags.push('ØªÙ‚Ù†ÙŠØ©');
            return tags;
        }

        // Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©
        window.feedSampleData = function() {
            let samples = [
                {
                    title: "Ù†Ø¸Ø±ÙŠØ© ÙÙŠØ«Ø§ØºÙˆØ±Ø³",
                    content: "ÙÙŠ Ø§Ù„Ù…Ø«Ù„Ø« Ø§Ù„Ù‚Ø§Ø¦Ù… Ø§Ù„Ø²Ø§ÙˆÙŠØ©ØŒ Ù…Ø±Ø¨Ø¹ Ø·ÙˆÙ„ Ø§Ù„ÙˆØªØ± ÙŠØ³Ø§ÙˆÙŠ Ù…Ø¬Ù…ÙˆØ¹ Ù…Ø±Ø¨Ø¹ÙŠ Ø·ÙˆÙ„ÙŠ Ø§Ù„Ø¶Ù„Ø¹ÙŠÙ† Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†. aÂ² + bÂ² = cÂ²",
                    category: "mathematical",
                    level: "intermediate"
                },
                {
                    title: "Ù‚Ø§Ù†ÙˆÙ† Ù†ÙŠÙˆØªÙ† Ø§Ù„Ø£ÙˆÙ„",
                    content: "Ø§Ù„Ø¬Ø³Ù… Ø§Ù„Ø³Ø§ÙƒÙ† ÙŠØ¨Ù‚Ù‰ Ø³Ø§ÙƒÙ†Ø§Ù‹ ÙˆØ§Ù„Ø¬Ø³Ù… Ø§Ù„Ù…ØªØ­Ø±Ùƒ ÙŠØ¨Ù‚Ù‰ Ù…ØªØ­Ø±ÙƒØ§Ù‹ Ø¨Ø³Ø±Ø¹Ø© Ø«Ø§Ø¨ØªØ© ÙÙŠ Ø®Ø· Ù…Ø³ØªÙ‚ÙŠÙ… Ù…Ø§ Ù„Ù… ØªØ¤Ø«Ø± Ø¹Ù„ÙŠÙ‡ Ù‚ÙˆØ© Ø®Ø§Ø±Ø¬ÙŠØ©.",
                    category: "scientific",
                    level: "basic"
                },
                {
                    title: "Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ",
                    content: "Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù‡Ùˆ Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø¨Ø´Ø±ÙŠ ÙÙŠ Ø§Ù„Ø¢Ù„Ø§Øª Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬Ø© Ù„Ù„ØªÙÙƒÙŠØ± ÙˆØ§Ù„ØªØ¹Ù„Ù….",
                    category: "technical",
                    level: "intermediate"
                },
                {
                    title: "Ø§Ù„ÙƒÙˆØ¬ÙŠØªÙˆ Ø§Ù„Ø¯ÙŠÙƒØ§Ø±ØªÙŠ",
                    content: "Ø£Ù†Ø§ Ø£ÙÙƒØ±ØŒ Ø¥Ø°Ù† Ø£Ù†Ø§ Ù…ÙˆØ¬ÙˆØ¯ - Ù…Ù‚ÙˆÙ„Ø© Ø±ÙŠÙ†ÙŠÙ‡ Ø¯ÙŠÙƒØ§Ø±Øª Ø§Ù„Ø´Ù‡ÙŠØ±Ø©.",
                    category: "philosophical",
                    level: "advanced"
                },
                {
                    title: "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
                    content: "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ù…Ù† Ø£Ù‚Ø¯Ù… Ø§Ù„Ù„ØºØ§Øª Ø§Ù„Ø³Ø§Ù…ÙŠØ© ÙˆØ£ÙƒØ«Ø±Ù‡Ø§ Ø§Ù†ØªØ´Ø§Ø±Ø§Ù‹.",
                    category: "linguistic",
                    level: "basic"
                }
            ];

            for (let sample of samples) {
                let item = {
                    id: Date.now() + Math.random(),
                    title: sample.title,
                    content: sample.content,
                    category: sample.category,
                    level: sample.level,
                    tags: extractTags(sample.content),
                    timestamp: new Date()
                };
                knowledgeSystem.items.push(item);
            }

            updateStatistics();
            displayKnowledgeBase();

            alert(`âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© ${samples.length} Ø¹Ù†ØµØ± Ù…Ø¹Ø±ÙÙŠ ØªØ¬Ø±ÙŠØ¨ÙŠ!`);
        };

        // Ø§Ù„Ø¨Ø­Ø«
        window.performSearch = function() {
            let query = document.getElementById('searchQuery').value;
            let searchType = document.getElementById('searchType').value;
            let maxResults = parseInt(document.getElementById('maxResults').value);

            if (!query) {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø§Ù„Ø¨Ø­Ø«');
                return;
            }

            knowledgeSystem.queries++;
            updateStatistics();

            let results = [];
            let queryLower = query.toLowerCase();

            for (let item of knowledgeSystem.items) {
                let relevance = 0;

                if (item.title.toLowerCase().includes(queryLower)) {
                    relevance += 0.6;
                }

                if (item.content.toLowerCase().includes(queryLower)) {
                    relevance += 0.4;
                }

                if (relevance > 0) {
                    results.push({
                        item: item,
                        relevance: relevance,
                        snippet: createSnippet(item.content, query)
                    });
                }
            }

            results.sort((a, b) => b.relevance - a.relevance);
            results = results.slice(0, maxResults);

            displaySearchResults(results);
        };

        // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù‚ØªØ·Ù
        function createSnippet(content, query) {
            let index = content.toLowerCase().indexOf(query.toLowerCase());
            if (index !== -1) {
                let start = Math.max(0, index - 50);
                let end = Math.min(content.length, index + query.length + 100);
                return (start > 0 ? "..." : "") + content.substring(start, end) + (end < content.length ? "..." : "");
            }
            return content.substring(0, 150) + (content.length > 150 ? "..." : "");
        }

        // Ø¹Ø±Ø¶ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø«
        function displaySearchResults(results) {
            let container = document.getElementById('searchResults');

            if (results.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #999; padding: 40px;">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬.</p>';
                return;
            }

            let html = '';
            for (let i = 0; i < results.length; i++) {
                let result = results[i];
                let item = result.item;

                html += `
                    <div class="result-item">
                        <h3>${i + 1}. ${item.title}</h3>
                        <div class="meta">
                            <span>ğŸ·ï¸ ${getCategoryName(item.category)}</span>
                            <span>ğŸ“Š ${getLevelName(item.level)}</span>
                            <span>ğŸ“… ${item.timestamp.toLocaleDateString('ar-SA')}</span>
                        </div>
                        <div class="snippet">${result.snippet}</div>
                        <div class="relevance">Ø§Ù„ØµÙ„Ø©: ${(result.relevance * 100).toFixed(0)}%</div>
                        ${item.tags.length > 0 ? '<div class="tags">' + item.tags.map(tag => `<span class="tag">${tag}</span>`).join('') + '</div>' : ''}
                    </div>
                `;
            }

            container.innerHTML = html;
        }

        // Ø§Ù„Ø¨Ø­Ø« Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø©
        window.searchByCategory = function() {
            let category = document.getElementById('feedCategory').value;
            let results = knowledgeSystem.items.filter(item => item.category === category);

            knowledgeSystem.queries++;
            updateStatistics();

            displaySearchResults(results.map(item => ({
                item: item,
                relevance: 1.0,
                snippet: item.content.substring(0, 150) + (item.content.length > 150 ? "..." : "")
            })));
        };

        // Ø¹Ø±Ø¶ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ù…Ø¹Ø±ÙØ©
        function displayKnowledgeBase() {
            let container = document.getElementById('knowledgeBase');

            if (knowledgeSystem.items.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #999; padding: 40px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ± Ù…Ø¹Ø±ÙÙŠØ© Ø¨Ø¹Ø¯.</p>';
                return;
            }

            let items = knowledgeSystem.items.slice(-10).reverse();
            let html = '';

            for (let item of items) {
                html += `
                    <div class="knowledge-item">
                        <div class="title">${item.title}</div>
                        <div class="content">${item.content.substring(0, 200)}${item.content.length > 200 ? '...' : ''}</div>
                        <div class="meta" style="margin-top: 8px; font-size: 0.85em; color: #666;">
                            ğŸ·ï¸ ${getCategoryName(item.category)} | ğŸ“Š ${getLevelName(item.level)} | ğŸ“… ${item.timestamp.toLocaleDateString('ar-SA')}
                        </div>
                        ${item.tags.length > 0 ? '<div class="tags">' + item.tags.map(tag => `<span class="tag">${tag}</span>`).join('') + '</div>' : ''}
                    </div>
                `;
            }

            container.innerHTML = html;
        }

        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„ÙØ¦Ø©
        function getCategoryName(category) {
            const names = {
                'general': 'Ø¹Ø§Ù…',
                'mathematical': 'Ø±ÙŠØ§Ø¶ÙŠØ§Øª',
                'scientific': 'Ø¹Ù„ÙˆÙ…',
                'linguistic': 'Ù„ØºÙˆÙŠØ§Øª',
                'historical': 'ØªØ§Ø±ÙŠØ®',
                'technical': 'ØªÙ‚Ù†ÙŠØ©',
                'philosophical': 'ÙÙ„Ø³ÙØ©',
                'cultural': 'Ø«Ù‚Ø§ÙØ©'
            };
            return names[category] || category;
        }

        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªÙˆÙ‰
        function getLevelName(level) {
            const names = {
                'basic': 'Ø£Ø³Ø§Ø³ÙŠ',
                'intermediate': 'Ù…ØªÙˆØ³Ø·',
                'advanced': 'Ù…ØªÙ‚Ø¯Ù…',
                'expert': 'Ø®Ø¨ÙŠØ±'
            };
            return names[level] || level;
        }

        // Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„
        window.clearAll = function() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ')) {
                knowledgeSystem.items = [];
                knowledgeSystem.relations = [];
                knowledgeSystem.queries = 0;
                knowledgeSystem.clusters = 0;

                updateStatistics();
                displayKnowledgeBase();
                document.getElementById('searchResults').innerHTML = '<p style="text-align: center; color: #999; padding: 40px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ø¨Ø¹Ø¯.</p>';

                alert('ğŸ§¹ ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
            }
        };

        // ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ø¹Ø±ÙØ©
        window.exportKnowledge = function() {
            let data = JSON.stringify(knowledgeSystem, null, 2);
            let blob = new Blob([data], { type: 'application/json' });
            let url = URL.createObjectURL(blob);
            let a = document.createElement('a');
            a.href = url;
            a.download = 'knowledge-export.json';
            a.click();
            URL.revokeObjectURL(url);

            alert('ğŸ’¾ ØªÙ… ØªØµØ¯ÙŠØ± Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ù…Ø¹Ø±ÙØ©');
        };

        // ØªÙ‡ÙŠØ¦Ø©
        updateStatistics();
    </script>
</body>
</html>
